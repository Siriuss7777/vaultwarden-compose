"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[197],{7197:(n,i,t)=>{t.r(i),t.d(i,{OrganizationBillingModule:()=>Ki});var e=t(71146),o=t(98597),s=t(66206),a=t(49264),r=t(40861),c=t(10926),u=t(54019),l=t(59157),H=t(68362),d=t(24852),g=t(34668),p=t(19419),h=t(81974),b=t(17846),f=t(17404),Z=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};const U=function(n){return{"bwi-spin":n}};function m(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"button",3),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw();return d.KtG(i.load())})),d._uU(1,"\n    "),d._UZ(2,"i",4),d._uU(3),d.ALo(4,"i18n"),d.qZA()}if(2&n){const n=d.oxw();d.Q6J("disabled",n.loading),d.xp6(2),d.Q6J("ngClass",d.VKq(5,U,n.loading)),d.xp6(1),d.hij("\n    ",d.lcZ(4,3,"refresh"),"\n  ")}}function _(n,i){1&n&&(d.ynx(0),d._uU(1,"\n  "),d._UZ(2,"i",5),d.ALo(3,"i18n"),d._uU(4,"\n  "),d.TgZ(5,"span",6),d._uU(6),d.ALo(7,"i18n"),d.qZA(),d._uU(8,"\n"),d.BQk()),2&n&&(d.xp6(2),d.s9C("title",d.lcZ(3,2,"loading")),d.xp6(4),d.Oqu(d.lcZ(7,4,"loading")))}function y(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n  "),d._UZ(2,"app-billing-history",7),d._uU(3,"\n"),d.BQk()),2&n){const n=d.oxw();d.xp6(2),d.Q6J("billing",n.billing)}}class A{constructor(n,i){this.organizationApiService=n,this.route=i,this.loading=!1,this.firstLoaded=!1,this.destroy$=new u.x}ngOnInit(){return Z(this,void 0,void 0,(function*(){this.route.params.pipe((0,l.b)((n=>Z(this,void 0,void 0,(function*(){this.organizationId=n.organizationId,yield this.load(),this.firstLoaded=!0})))),(0,H.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){return Z(this,void 0,void 0,(function*(){this.loading||(this.loading=!0,this.billing=yield this.organizationApiService.getBilling(this.organizationId),this.loading=!1)}))}}A.ɵfac=function(n){return new(n||A)(d.Y36(g.M),d.Y36(o.gz))},A.ɵcmp=d.Xpm({type:A,selectors:[["app-org-billing-history-view"]],decls:15,vars:6,consts:[[1,"d-flex","page-header"],["bitButton","","buttonType","secondary","class","tw-ml-auto",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["bitButton","","buttonType","secondary",1,"tw-ml-auto",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"billing"]],template:function(n,i){1&n&&(d._uU(0,"\n"),d._uU(1,"\n"),d.TgZ(2,"div",0),d._uU(3,"\n  "),d.TgZ(4,"h1"),d._uU(5),d.ALo(6,"i18n"),d.qZA(),d._uU(7,"\n  "),d.YNc(8,m,5,7,"button",1),d._uU(9,"\n"),d.qZA(),d._uU(10,"\n"),d.YNc(11,_,9,6,"ng-container",2),d._uU(12,"\n"),d.YNc(13,y,4,1,"ng-container",2),d._uU(14,"\n")),2&n&&(d.xp6(5),d.hij("\n    ",d.lcZ(6,4,"billingHistory"),"\n  "),d.xp6(3),d.Q6J("ngIf",i.firstLoaded),d.xp6(3),d.Q6J("ngIf",!i.firstLoaded&&i.loading),d.xp6(2),d.Q6J("ngIf",i.billing))},dependencies:[p.mk,p.O5,h.r,b.Z,f.C],encapsulation:2});var v=t(30359),x=t(92786),S=t(32100);function w(n,i){1&n&&(d.TgZ(0,"a",10),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n&&(d.xp6(1),d.hij("\n            ",d.lcZ(2,1,"paymentMethod"),"\n          "))}function C(n,i){1&n&&(d.TgZ(0,"a",11),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n&&(d.xp6(1),d.hij("\n            ",d.lcZ(2,1,"billingHistory"),"\n          "))}class T{constructor(n,i,t){this.route=n,this.organizationService=i,this.platformUtilsService=t}ngOnInit(){this.showPaymentAndHistory$=this.route.params.pipe((0,v.w)((n=>this.organizationService.get$(n.organizationId))),(0,x.U)((n=>!this.platformUtilsService.isSelfHost()&&n.canManageBilling)))}}T.ɵfac=function(n){return new(n||T)(d.Y36(o.gz),d.Y36(s.Mn),d.Y36(S.P))},T.ɵcmp=d.Xpm({type:T,selectors:[["app-org-billing-tab"]],decls:34,vars:12,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","subscription","routerLinkActive","active",1,"list-group-item"],["routerLink","payment-method","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","history","class","list-group-item","routerLinkActive","active",4,"ngIf"],[1,"col-9"],["routerLink","payment-method","routerLinkActive","active",1,"list-group-item"],["routerLink","history","routerLinkActive","active",1,"list-group-item"]],template:function(n,i){1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n  "),d.TgZ(2,"div",1),d._uU(3,"\n    "),d.TgZ(4,"div",2),d._uU(5,"\n      "),d.TgZ(6,"div",3),d._uU(7,"\n        "),d.TgZ(8,"div",4),d._uU(9),d.ALo(10,"i18n"),d.qZA(),d._uU(11,"\n        "),d.TgZ(12,"div",5),d._uU(13,"\n          "),d.TgZ(14,"a",6),d._uU(15),d.ALo(16,"i18n"),d.qZA(),d._uU(17,"\n          "),d.YNc(18,w,3,3,"a",7),d.ALo(19,"async"),d._uU(20,"\n          "),d.YNc(21,C,3,3,"a",8),d.ALo(22,"async"),d._uU(23,"\n        "),d.qZA(),d._uU(24,"\n      "),d.qZA(),d._uU(25,"\n    "),d.qZA(),d._uU(26,"\n    "),d.TgZ(27,"div",9),d._uU(28,"\n      "),d._UZ(29,"router-outlet"),d._uU(30,"\n    "),d.qZA(),d._uU(31,"\n  "),d.qZA(),d._uU(32,"\n"),d.qZA(),d._uU(33,"\n")),2&n&&(d.xp6(9),d.Oqu(d.lcZ(10,4,"billing")),d.xp6(6),d.hij("\n            ",d.lcZ(16,6,"subscription"),"\n          "),d.xp6(3),d.Q6J("ngIf",d.lcZ(19,8,i.showPaymentAndHistory$)),d.xp6(3),d.Q6J("ngIf",d.lcZ(22,10,i.showPaymentAndHistory$)))},dependencies:[p.O5,o.lC,o.yS,o.Od,p.Ov,f.C],encapsulation:2});var q,L=t(77494);!function(n){n[n.Default=0]="Default",n[n.BillingSync=1]="BillingSync",n[n.Scim=2]="Scim"}(q||(q={}));var I=t(23772),k=t(91667);class J extends k.Y{constructor(){super(...arguments),this.type=q.Default}}var M=t(64751),B=t(55602),O=t(31131),Q=t(98645),P=t(33245),N=t(24610),z=t(53707),Y=t(35094),j=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};function D(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"app-user-verification",15),d.NdJ("ngModelChange",(function(i){d.CHM(n);const t=d.oxw();return d.KtG(t.masterPassword=i)})),d._uU(1,"\n        "),d.qZA()}if(2&n){const n=d.oxw();d.Q6J("ngModel",n.masterPassword)}}function F(n,i){1&n&&(d.ynx(0),d._uU(1,"\n          "),d.TgZ(2,"p"),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n          "),d.TgZ(6,"app-callout",16),d._uU(7),d.ALo(8,"i18n"),d.qZA(),d._uU(9,"\n        "),d.BQk()),2&n&&(d.xp6(3),d.Oqu(d.lcZ(4,2,"rotateBillingSyncTokenTitle")),d.xp6(4),d.hij("\n            ",d.lcZ(8,4,"rotateBillingSyncTokenWarning"),"\n          "))}function G(n,i){if(1&n&&(d.TgZ(0,"div",25),d._uU(1,"\n            "),d.TgZ(2,"b",26),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5),d.ALo(6,"date"),d.qZA()),2&n){const n=d.oxw(2);d.xp6(3),d.hij("",d.lcZ(4,2,"lastSync"),":"),d.xp6(2),d.hij("\n            ",d.xi3(6,4,n.lastSyncDate,"medium"),"\n          ")}}function K(n,i){if(1&n&&(d.TgZ(0,"div",27),d._uU(1,"\n            "),d._UZ(2,"i",28),d._uU(3),d.ALo(4,"i18n"),d.qZA()),2&n){const n=d.oxw(2);d.xp6(3),d.hij("\n            ",d.xi3(4,1,1===n.daysBetween?"awaitingSyncSingular":"awaitingSyncPlural",n.daysBetween),"\n          ")}}function R(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"div"),d._uU(1,"\n          "),d.TgZ(2,"p"),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n          "),d.TgZ(6,"label",17),d._uU(7,"Billing Sync Key"),d.qZA(),d._uU(8,"\n          "),d.TgZ(9,"div",18),d._uU(10,"\n            "),d.TgZ(11,"input",19),d.NdJ("ngModelChange",(function(i){d.CHM(n);const t=d.oxw();return d.KtG(t.clientSecret=i)})),d.qZA(),d._uU(12,"\n            "),d.TgZ(13,"div",20),d._uU(14,"\n              "),d.TgZ(15,"button",21),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw();return d.KtG(i.copy())})),d.ALo(16,"i18n"),d._uU(17,"\n                "),d._UZ(18,"i",22),d._uU(19,"\n              "),d.qZA(),d._uU(20,"\n            "),d.qZA(),d._uU(21,"\n          "),d.qZA(),d._uU(22,"\n          "),d.YNc(23,G,7,7,"div",23),d._uU(24,"\n          "),d.YNc(25,K,5,4,"div",24),d._uU(26,"\n        "),d.qZA()}if(2&n){const n=d.oxw();d.xp6(3),d.Oqu(d.lcZ(4,5,"copyPasteBillingSync")),d.xp6(8),d.Q6J("ngModel",n.clientSecret),d.xp6(4),d.Q6J("appA11yTitle",d.lcZ(16,7,"copy")),d.xp6(8),d.Q6J("ngIf",n.showLastSyncText),d.xp6(2),d.Q6J("ngIf",n.showAwaitingSyncText)}}function E(n,i){1&n&&(d._UZ(0,"i",31),d.ALo(1,"i18n")),2&n&&d.s9C("title",d.lcZ(1,1,"loading"))}function $(n,i){if(1&n&&(d.TgZ(0,"button",29),d._uU(1,"\n          "),d.YNc(2,E,2,3,"i",30),d._uU(3,"\n          "),d.TgZ(4,"span"),d._uU(5),d.qZA(),d._uU(6,"\n        "),d.qZA()),2&n){const n=d.oxw(),i=d.MAs(5);d.Q6J("disabled",i.loading),d.xp6(2),d.Q6J("ngIf",i.loading),d.xp6(3),d.hij("\n            ",n.submitButtonText,"\n          ")}}function V(n,i){1&n&&(d.TgZ(0,"button",32),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n&&(d.xp6(1),d.hij("\n          ",d.lcZ(2,1,"close"),"\n        "))}function X(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"button",33),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw();return d.KtG(i.cancelRotate())})),d._uU(1),d.ALo(2,"i18n"),d.qZA()}2&n&&(d.xp6(1),d.hij("\n          ",d.lcZ(2,1,"cancel"),"\n        "))}function W(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"button",33),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw();return d.KtG(i.rotateToken())})),d._uU(1),d.ALo(2,"i18n"),d.qZA()}2&n&&(d.xp6(1),d.hij("\n          ",d.lcZ(2,1,"rotateToken"),"\n        "))}class nn{constructor(n,i,t,e,o,s){this.userVerificationService=n,this.apiService=i,this.platformUtilsService=t,this.i18nService=e,this.organizationApiService=o,this.lastSyncDate=null,this.organizationId=s.data.organizationId,this.hasBillingToken=s.data.hasBillingToken}copy(){this.platformUtilsService.copyToClipboard(this.clientSecret)}submit(){return j(this,void 0,void 0,(function*(){if(this.showRotateScreen){this.formPromise=this.userVerificationService.buildRequest(this.masterPassword,J).then((n=>(n.type=q.BillingSync,this.organizationApiService.rotateApiKey(this.organizationId,n))));const n=yield this.formPromise;yield this.load(n),this.showRotateScreen=!1,this.platformUtilsService.showToast("success",null,this.i18nService.t("billingSyncApiKeyRotated"))}else{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword,J).then((n=>(n.type=q.BillingSync,this.organizationApiService.getOrCreateApiKey(this.organizationId,n))));const n=yield this.formPromise;yield this.load(n)}}))}load(n){return j(this,void 0,void 0,(function*(){this.clientSecret=n.apiKey,this.keyRevisionDate=n.revisionDate,this.hasBillingToken=!0;const i=yield this.apiService.getSponsorshipSyncStatus(this.organizationId);this.lastSyncDate=i.lastSyncDate}))}cancelRotate(){this.showRotateScreen=!1}rotateToken(){this.showRotateScreen=!0}dayDiff(n,i){const t=Math.abs(i.getTime()-n.getTime());return Math.round(t/864e5)}get submitButtonText(){return this.showRotateScreen?this.i18nService.t("rotateToken"):this.i18nService.t(this.hasBillingToken?"continue":"generateToken")}get showLastSyncText(){return this.lastSyncDate&&this.lastSyncDate>this.keyRevisionDate}get showAwaitingSyncText(){return this.lastSyncDate&&this.lastSyncDate<=this.keyRevisionDate}get daysBetween(){return this.dayDiff(this.keyRevisionDate,new Date)}}nn.ɵfac=function(n){return new(n||nn)(d.Y36(M.i),d.Y36(B.s),d.Y36(S.P),d.Y36(O.D),d.Y36(g.M),d.Y36(L.u))},nn.ɵcmp=d.Xpm({type:nn,selectors:[["app-billing-sync-api-key"]],decls:44,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","billingSyncApiKeyTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","billingSyncApiKeyTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","class","btn btn-outline-secondary","data-dismiss","modal",4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],["type","warning"],["for","clientSecret"],[1,"input-group"],["id","clientSecret","type","text","name","clientSecret","disabled","",1,"form-control","text-monospace",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],["class","small text-muted mt-2",4,"ngIf"],["class","small text-danger mt-2",4,"ngIf"],[1,"small","text-muted","mt-2"],[1,"font-weight-semibold"],[1,"small","text-danger","mt-2"],[1,"bwi","bwi-error"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["class","bwi bwi-spinner bwi-spin",3,"title",4,"ngIf"],[1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(n,i){1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n  "),d.TgZ(2,"div",1),d._uU(3,"\n    "),d.TgZ(4,"form",2,3),d.NdJ("ngSubmit",(function(){return i.submit()})),d._uU(6,"\n      "),d.TgZ(7,"div",4),d._uU(8,"\n        "),d.TgZ(9,"h1",5),d._uU(10),d.ALo(11,"i18n"),d.qZA(),d._uU(12,"\n        "),d.TgZ(13,"button",6),d.ALo(14,"i18n"),d._uU(15,"\n          "),d.TgZ(16,"span",7),d._uU(17,"×"),d.qZA(),d._uU(18,"\n        "),d.qZA(),d._uU(19,"\n      "),d.qZA(),d._uU(20,"\n      "),d.TgZ(21,"div",8),d._uU(22,"\n        "),d.YNc(23,D,2,1,"app-user-verification",9),d._uU(24,"\n        "),d.YNc(25,F,10,6,"ng-container",10),d._uU(26,"\n\n        "),d.YNc(27,R,27,9,"div",10),d._uU(28,"\n      "),d.qZA(),d._uU(29,"\n      "),d.TgZ(30,"div",11),d._uU(31,"\n        "),d.YNc(32,$,7,3,"button",12),d._uU(33,"\n        "),d.YNc(34,V,3,3,"button",13),d._uU(35,"\n        "),d.YNc(36,X,3,3,"button",14),d._uU(37,"\n        "),d.YNc(38,W,3,3,"button",14),d._uU(39,"\n      "),d.qZA(),d._uU(40,"\n    "),d.qZA(),d._uU(41,"\n  "),d.qZA(),d._uU(42,"\n"),d.qZA(),d._uU(43,"\n")),2&n&&(d.xp6(4),d.Q6J("appApiAction",i.formPromise),d.xp6(6),d.hij("\n          ",d.lcZ(11,10,i.hasBillingToken?"viewBillingSyncToken":"generateBillingSyncToken"),"\n        "),d.xp6(3),d.s9C("appA11yTitle",d.lcZ(14,12,"close")),d.xp6(10),d.Q6J("ngIf",!i.clientSecret),d.xp6(2),d.Q6J("ngIf",i.clientSecret&&i.showRotateScreen),d.xp6(2),d.Q6J("ngIf",i.clientSecret&&!i.showRotateScreen),d.xp6(5),d.Q6J("ngIf",!i.clientSecret||i.showRotateScreen),d.xp6(2),d.Q6J("ngIf",!i.showRotateScreen),d.xp6(2),d.Q6J("ngIf",i.showRotateScreen),d.xp6(2),d.Q6J("ngIf",i.clientSecret&&!i.showRotateScreen))},dependencies:[p.O5,Q.Fj,Q.JJ,Q.JL,Q.On,Q.F,P.B,N.b,z.O,Y.W,p.uU,f.C],encapsulation:2});var tn=t(27885),en=t(98205),on=t(66385),sn=t(24083),an=t(67342);class rn{constructor(n,i){this.seatAdjustment=n,this.maxAutoscaleSeats=i}}var cn=t(20084),un=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};class ln{constructor(n,i,t,e){this.i18nService=n,this.platformUtilsService=i,this.logService=t,this.organizationApiService=e,this.seatPrice=0,this.interval="year",this.onAdjusted=new d.vpe}ngOnInit(){this.limitSubscription=null!=this.maxAutoscaleSeats,this.newSeatCount=this.currentSeatCount,this.newMaxSeats=this.maxAutoscaleSeats}submit(){return un(this,void 0,void 0,(function*(){try{const n=this.newSeatCount-this.currentSeatCount,i=new rn(n,this.newMaxSeats);this.formPromise=this.organizationApiService.updateSubscription(this.organizationId,i),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("subscriptionUpdated"))}catch(n){this.logService.error(n)}this.onAdjusted.emit()}))}limitSubscriptionChanged(){this.limitSubscription||(this.newMaxSeats=null)}get adjustedSeatTotal(){return this.newSeatCount*this.seatPrice}get maxSeatTotal(){return this.newMaxSeats*this.seatPrice}}ln.ɵfac=function(n){return new(n||ln)(d.Y36(O.D),d.Y36(S.P),d.Y36(tn.$),d.Y36(g.M))},ln.ɵcmp=d.Xpm({type:ln,selectors:[["app-adjust-subscription"]],inputs:{organizationId:"organizationId",maxAutoscaleSeats:"maxAutoscaleSeats",currentSeatCount:"currentSeatCount",seatPrice:"seatPrice",interval:"interval"},outputs:{onAdjusted:"onAdjusted"},decls:82,vars:57,consts:[["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"form-group","col-6"],["for","newSeatCount"],["id","newSeatCount","type","number","name","NewSeatCount","min","0","step","1","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-block","text-muted","mb-4"],[1,"row","mb-4"],[1,"form-group","col-sm"],[1,"form-check"],["id","limitSubscription","type","checkbox","name","LimitSubscription",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","limitSubscription"],[1,"d-block","text-muted"],[1,"row","mb-4",3,"hidden"],["for","maxAutoscaleSeats"],["id","maxAutoscaleSeats","type","number","name","MaxAutoscaleSeats","step","1",1,"form-control","col-6",3,"ngModel","min","required","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[3,"showMethods"]],template:function(n,i){if(1&n&&(d.TgZ(0,"form",0,1),d.NdJ("ngSubmit",(function(){return i.submit()})),d._uU(2,"\n  "),d.TgZ(3,"div"),d._uU(4,"\n    "),d.TgZ(5,"div",2),d._uU(6,"\n      "),d.TgZ(7,"div",3),d._uU(8,"\n        "),d.TgZ(9,"label",4),d._uU(10),d.ALo(11,"i18n"),d.qZA(),d._uU(12,"\n        "),d.TgZ(13,"input",5),d.NdJ("ngModelChange",(function(n){return i.newSeatCount=n})),d.qZA(),d._uU(14,"\n        "),d.TgZ(15,"small",6),d._uU(16,"\n          "),d.TgZ(17,"strong"),d._uU(18),d.ALo(19,"i18n"),d.qZA(),d._uU(20),d.ALo(21,"currency"),d.ALo(22,"currency"),d.ALo(23,"i18n"),d.qZA(),d._uU(24,"\n      "),d.qZA(),d._uU(25,"\n    "),d.qZA(),d._uU(26,"\n    "),d.TgZ(27,"div",7),d._uU(28,"\n      "),d.TgZ(29,"div",8),d._uU(30,"\n        "),d.TgZ(31,"div",9),d._uU(32,"\n          "),d.TgZ(33,"input",10),d.NdJ("ngModelChange",(function(n){return i.limitSubscription=n}))("change",(function(){return i.limitSubscriptionChanged()})),d.qZA(),d._uU(34,"\n          "),d.TgZ(35,"label",11),d._uU(36),d.ALo(37,"i18n"),d.qZA(),d._uU(38,"\n        "),d.qZA(),d._uU(39,"\n        "),d.TgZ(40,"small",12),d._uU(41),d.ALo(42,"i18n"),d.qZA(),d._uU(43,"\n      "),d.qZA(),d._uU(44,"\n    "),d.qZA(),d._uU(45,"\n    "),d.TgZ(46,"div",13),d._uU(47,"\n      "),d.TgZ(48,"div",8),d._uU(49,"\n        "),d.TgZ(50,"label",14),d._uU(51),d.ALo(52,"i18n"),d.qZA(),d._uU(53,"\n        "),d.TgZ(54,"input",15),d.NdJ("ngModelChange",(function(n){return i.newMaxSeats=n})),d.qZA(),d._uU(55,"\n        "),d.TgZ(56,"small",12),d._uU(57,"\n          "),d.TgZ(58,"strong"),d._uU(59),d.ALo(60,"i18n"),d.qZA(),d._uU(61),d.ALo(62,"currency"),d.ALo(63,"currency"),d.ALo(64,"i18n"),d.qZA(),d._uU(65,"\n      "),d.qZA(),d._uU(66,"\n    "),d.qZA(),d._uU(67,"\n    "),d.TgZ(68,"button",16),d._uU(69,"\n      "),d._UZ(70,"i",17),d.ALo(71,"i18n"),d._uU(72,"\n      "),d.TgZ(73,"span"),d._uU(74),d.ALo(75,"i18n"),d.qZA(),d._uU(76,"\n    "),d.qZA(),d._uU(77,"\n  "),d.qZA(),d._uU(78,"\n"),d.qZA(),d._uU(79,"\n"),d._UZ(80,"app-payment",18),d._uU(81,"\n")),2&n){const n=d.MAs(1);d.Q6J("appApiAction",i.formPromise),d.xp6(10),d.Oqu(d.lcZ(11,25,"subscriptionSeats")),d.xp6(3),d.Q6J("ngModel",i.newSeatCount),d.xp6(5),d.hij("",d.lcZ(19,27,"total"),":"),d.xp6(2),d.HOy(" ",i.newSeatCount||0," ×\n          ",d.xi3(21,29,i.seatPrice,"$")," = ",d.xi3(22,32,i.adjustedSeatTotal,"$")," /\n          ",d.lcZ(23,35,i.interval),"\n        "),d.xp6(13),d.Q6J("ngModel",i.limitSubscription),d.xp6(3),d.Oqu(d.lcZ(37,37,"limitSubscription")),d.xp6(5),d.Oqu(d.lcZ(42,39,"limitSubscriptionDesc")),d.xp6(5),d.Q6J("hidden",!i.limitSubscription),d.xp6(5),d.Oqu(d.lcZ(52,41,"maxSeatLimit")),d.xp6(3),d.Q6J("ngModel",i.newMaxSeats)("min",null==i.newSeatCount?1:i.newSeatCount)("required",i.limitSubscription),d.xp6(5),d.hij("",d.lcZ(60,43,"maxSeatCost"),":"),d.xp6(2),d.HOy(" ",i.newMaxSeats||0," ×\n          ",d.xi3(62,45,i.seatPrice,"$")," = ",d.xi3(63,48,i.maxSeatTotal,"$")," /\n          ",d.lcZ(64,51,i.interval),"\n        "),d.xp6(7),d.Q6J("disabled",n.loading),d.xp6(2),d.s9C("title",d.lcZ(71,53,"loading")),d.xp6(4),d.Oqu(d.lcZ(75,55,"save")),d.xp6(6),d.Q6J("showMethods",!1)}},dependencies:[Q.Fj,Q.wV,Q.Wl,Q.JJ,Q.JL,Q.Q7,Q.qQ,Q.On,Q.F,N.b,cn.p,p.H9,f.C],encapsulation:2});var Hn=t(5278),dn=t(50243),gn=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};class pn{constructor(n){this.logService=n,this.onChanged=new d.vpe,this.onCanceled=new d.vpe,this.defaultUpgradePlan=I.k.FamiliesAnnually,this.defaultUpgradeProduct=Hn.k.Families}submit(){return gn(this,void 0,void 0,(function*(){try{this.onChanged.emit()}catch(n){this.logService.error(n)}}))}cancel(){this.onCanceled.emit()}}pn.ɵfac=function(n){return new(n||pn)(d.Y36(tn.$))},pn.ɵcmp=d.Xpm({type:pn,selectors:[["app-change-plan"]],inputs:{organizationId:"organizationId"},outputs:{onChanged:"onChanged",onCanceled:"onCanceled"},decls:24,vars:14,consts:[[1,"card","card-org-plans"],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[1,"mb-0"],[3,"showFree","showCancel","plan","product","organizationId","onCanceled"]],template:function(n,i){1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n  "),d.TgZ(2,"div",1),d._uU(3,"\n    "),d.TgZ(4,"button",2),d.NdJ("click",(function(){return i.cancel()})),d.ALo(5,"i18n"),d._uU(6,"\n      "),d.TgZ(7,"span",3),d._uU(8,"×"),d.qZA(),d._uU(9,"\n    "),d.qZA(),d._uU(10,"\n    "),d.TgZ(11,"h2",4),d._uU(12),d.ALo(13,"i18n"),d.qZA(),d._uU(14,"\n    "),d.TgZ(15,"p",5),d._uU(16),d.ALo(17,"i18n"),d.qZA(),d._uU(18,"\n    "),d.TgZ(19,"app-organization-plans",6),d.NdJ("onCanceled",(function(){return i.cancel()})),d._uU(20,"\n    "),d.qZA(),d._uU(21,"\n  "),d.qZA(),d._uU(22,"\n"),d.qZA(),d._uU(23,"\n")),2&n&&(d.xp6(4),d.s9C("appA11yTitle",d.lcZ(5,8,"cancel")),d.xp6(8),d.Oqu(d.lcZ(13,10,"changeBillingPlan")),d.xp6(4),d.Oqu(d.lcZ(17,12,"changeBillingPlanUpgrade")),d.xp6(3),d.Q6J("showFree",!1)("showCancel",!0)("plan",i.defaultUpgradePlan)("product",i.defaultUpgradeProduct)("organizationId",i.organizationId))},dependencies:[P.B,dn.z,f.C],encapsulation:2});var hn=t(86290),bn=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};class fn{constructor(n,i,t){this.fileDownloadService=n,this.logService=i,this.organizationApiService=t,this.onDownloaded=new d.vpe,this.onCanceled=new d.vpe}submit(){return bn(this,void 0,void 0,(function*(){if(null!=this.installationId&&""!==this.installationId)try{this.formPromise=this.organizationApiService.getLicense(this.organizationId,this.installationId);const n=yield this.formPromise,i=JSON.stringify(n,null,2);this.fileDownloadService.download({fileName:"bitwarden_organization_license.json",blobData:i}),this.onDownloaded.emit()}catch(n){this.logService.error(n)}}))}cancel(){this.onCanceled.emit()}}fn.ɵfac=function(n){return new(n||fn)(d.Y36(hn._),d.Y36(tn.$),d.Y36(g.M))},fn.ɵcmp=d.Xpm({type:fn,selectors:[["app-download-license"]],inputs:{organizationId:"organizationId"},outputs:{onDownloaded:"onDownloaded",onCanceled:"onCanceled"},decls:53,vars:24,consts:[["ngNativeValidate","",1,"card",3,"appApiAction","ngSubmit"],["form",""],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[1,"row"],[1,"form-group","col-6"],[1,"d-flex"],["for","installationId"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/licensing-on-premise/#organization-account-sharing",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","installationId","type","text","name","InstallationId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(n,i){if(1&n&&(d.TgZ(0,"form",0,1),d.NdJ("ngSubmit",(function(){return i.submit()})),d._uU(2,"\n  "),d.TgZ(3,"div",2),d._uU(4,"\n    "),d.TgZ(5,"button",3),d.NdJ("click",(function(){return i.cancel()})),d.ALo(6,"i18n"),d._uU(7,"\n      "),d.TgZ(8,"span",4),d._uU(9,"×"),d.qZA(),d._uU(10,"\n    "),d.qZA(),d._uU(11,"\n    "),d.TgZ(12,"h3",5),d._uU(13),d.ALo(14,"i18n"),d.qZA(),d._uU(15,"\n    "),d.TgZ(16,"div",6),d._uU(17,"\n      "),d.TgZ(18,"div",7),d._uU(19,"\n        "),d.TgZ(20,"div",8),d._uU(21,"\n          "),d.TgZ(22,"label",9),d._uU(23),d.ALo(24,"i18n"),d.qZA(),d._uU(25,"\n          "),d.TgZ(26,"a",10),d.ALo(27,"i18n"),d._uU(28,"\n            "),d._UZ(29,"i",11),d._uU(30,"\n          "),d.qZA(),d._uU(31,"\n        "),d.qZA(),d._uU(32,"\n        "),d.TgZ(33,"input",12),d.NdJ("ngModelChange",(function(n){return i.installationId=n})),d.qZA(),d._uU(34,"\n      "),d.qZA(),d._uU(35,"\n    "),d.qZA(),d._uU(36,"\n    "),d.TgZ(37,"button",13),d._uU(38,"\n      "),d._UZ(39,"i",14),d.ALo(40,"i18n"),d._uU(41,"\n      "),d.TgZ(42,"span"),d._uU(43),d.ALo(44,"i18n"),d.qZA(),d._uU(45,"\n    "),d.qZA(),d._uU(46,"\n    "),d.TgZ(47,"button",15),d.NdJ("click",(function(){return i.cancel()})),d._uU(48),d.ALo(49,"i18n"),d.qZA(),d._uU(50,"\n  "),d.qZA(),d._uU(51,"\n"),d.qZA(),d._uU(52,"\n")),2&n){const n=d.MAs(1);d.Q6J("appApiAction",i.formPromise),d.xp6(5),d.s9C("appA11yTitle",d.lcZ(6,10,"cancel")),d.xp6(8),d.Oqu(d.lcZ(14,12,"downloadLicense")),d.xp6(10),d.Oqu(d.lcZ(24,14,"enterInstallationId")),d.xp6(3),d.s9C("appA11yTitle",d.lcZ(27,16,"learnMore")),d.xp6(7),d.Q6J("ngModel",i.installationId),d.xp6(4),d.Q6J("disabled",n.loading),d.xp6(2),d.s9C("title",d.lcZ(40,18,"loading")),d.xp6(4),d.Oqu(d.lcZ(44,20,"submit")),d.xp6(5),d.hij("\n      ",d.lcZ(49,22,"cancel"),"\n    ")}},dependencies:[Q.Fj,Q.JJ,Q.JL,Q.Q7,Q.On,Q.F,P.B,N.b,f.C],encapsulation:2});var Zn=t(66997),Un=t(22221);const mn=Zn.W4`
<svg width="216" height="231" viewBox="0 0 216 231" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M133.356 85.6618C133.136 85.43 132.871 85.2457 132.577 85.1198C132.283 84.9939 131.968 84.93 131.648 84.9318H87.8482C87.5289 84.93 87.2113 84.9939 86.9175 85.1198C86.6237 85.2457 86.359 85.43 86.14 85.6618C85.9083 85.8808 85.7239 86.1473 85.598 86.4411C85.4721 86.7349 85.4082 87.0506 85.41 87.37V116.57C85.4192 118.793 85.8499 120.994 86.6802 123.056C87.4705 125.091 88.5326 127.011 89.8375 128.761C91.1789 130.515 92.6808 132.137 94.3233 133.612C95.8472 135.01 97.4532 136.318 99.1304 137.528C100.59 138.565 102.123 139.547 103.729 140.474C105.335 141.401 106.469 142.027 107.131 142.354C107.799 142.682 108.339 142.941 108.741 143.113C109.055 143.264 109.4 143.339 109.748 143.332C110.091 143.337 110.431 143.257 110.737 143.102C111.146 142.923 111.679 142.671 112.354 142.343C113.03 142.014 114.179 141.386 115.756 140.463C117.333 139.539 118.884 138.554 120.355 137.517C122.034 136.306 123.642 134.999 125.169 133.601C126.814 132.128 128.316 130.504 129.655 128.75C130.958 126.998 132.021 125.08 132.813 123.045C133.645 120.983 134.075 118.782 134.083 116.559V87.3591C134.085 87.0415 134.021 86.7276 133.895 86.4356C133.769 86.1436 133.586 85.8808 133.356 85.6618ZM127.71 116.836C127.71 127.421 109.748 136.514 109.748 136.514V91.1879H127.71V116.836Z" fill="rgb(var(--color-secondary-700))"/>
  <path d="M24.6216 122.3C24.7144 123.4 25.6819 124.217 26.7825 124.125C27.8832 124.032 28.7002 123.064 28.6074 121.964L24.6216 122.3ZM151.501 45.7445C152.57 45.4679 153.213 44.3768 152.936 43.3074L148.429 25.8809C148.152 24.8115 147.061 24.1688 145.992 24.4454C144.922 24.722 144.28 25.8131 144.556 26.8825L148.563 42.3728L133.073 46.3793C132.003 46.6559 131.361 47.747 131.637 48.8164C131.914 49.8858 133.005 50.5285 134.074 50.2519L151.501 45.7445ZM28.6074 121.964C26.6788 99.0874 34.4658 75.5543 51.9661 58.054L49.1377 55.2256C30.7695 73.5938 22.5982 98.2999 24.6216 122.3L28.6074 121.964ZM51.9661 58.054C78.5404 31.4797 119.036 27.3026 149.985 45.5315L152.015 42.0849C119.534 22.9534 77.0327 27.3306 49.1377 55.2256L51.9661 58.054Z" fill="rgb(var(--color-secondary-700))"/>
  <path d="M67.4747 185.062C66.4089 185.352 65.7801 186.451 66.0701 187.517L70.797 204.885C71.0871 205.951 72.1862 206.58 73.252 206.29C74.3179 205.999 74.9467 204.9 74.6567 203.834L70.455 188.396L85.8934 184.194C86.9592 183.904 87.5881 182.805 87.298 181.739C87.008 180.674 85.9088 180.045 84.843 180.335L67.4747 185.062ZM192.478 100.283C192.286 99.1952 191.248 98.4697 190.16 98.6625C189.072 98.8552 188.347 99.8931 188.54 100.981L192.478 100.283ZM166.138 172.225C139.813 198.55 99.8271 202.897 68.9932 185.255L67.0068 188.727C99.3669 207.242 141.333 202.687 168.966 175.054L166.138 172.225ZM188.54 100.981C192.985 126.07 185.516 152.847 166.138 172.225L168.966 175.054C189.307 154.713 197.142 126.603 192.478 100.283L188.54 100.981Z" fill="rgb(var(--color-secondary-700))"/>
  <path d="M37.726 108.132C39.283 92.1931 46.1655 76.6765 58.3734 64.4686C75.2893 47.5527 98.5583 40.8618 120.5 44.396" stroke="rgb(var(--color-secondary-700))" stroke-width="2" stroke-linecap="round"/>
  <path d="M180.595 119.132C179.653 136.119 172.693 152.834 159.717 165.811C144.44 181.088 123.982 188.025 104 186.623" stroke="rgb(var(--color-secondary-700))" stroke-width="2" stroke-linecap="round"/>
  <rect x="153.5" y="56.1317" width="49" height="34" rx="2.5" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <path d="M153.5 63.6317V63.6317C153.5 66.9454 156.186 69.6317 159.5 69.6317H172.509M202.5 63.6317V63.6317C202.5 66.9454 199.814 69.6317 196.5 69.6317H183.491" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <mask id="path-8-inside-1_1000_26057" fill="white">
    <rect x="172" y="65.6317" width="12" height="9" rx="1.25"/>
  </mask>
  <rect x="172" y="65.6317" width="12" height="9" rx="1.25" stroke="rgb(var(--color-secondary-700))" stroke-width="6" mask="url(#path-8-inside-1_1000_26057)"/>
  <path d="M187 54.6317C187 54.6317 187 53.6317 187 52.6317C187 51.6317 186.053 50.6317 185.105 50.6317C184.158 50.6317 171.842 50.6317 170.895 50.6317C169.947 50.6317 169 51.6317 169 52.6317C169 53.6317 169 54.6317 169 54.6317" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <circle cx="48" cy="141" r="10.5" fill="rgb(var(--color-background))" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <path d="M64.9935 168.5H64.9126H64.8318H64.7512H64.6708H64.5905H64.5104H64.4304H64.3506H64.2709H64.1914H64.1121H64.0329H63.9538H63.8749H63.7962H63.7176H63.6392H63.5609H63.4828H63.4048H63.3269H63.2492H63.1717H63.0943H63.017H62.9399H62.8629H62.7861H62.7094H62.6329H62.5565H62.4802H62.4041H62.3281H62.2523H62.1766H62.101H62.0256H61.9503H61.8751H61.8001H61.7252H61.6504H61.5758H61.5013H61.4269H61.3527H61.2786H61.2046H61.1308H61.0571H60.9835H60.91H60.8367H60.7635H60.6904H60.6175H60.5446H60.4719H60.3993H60.3269H60.2545H60.1823H60.1102H60.0382H59.9664H59.8946H59.823H59.7515H59.6801H59.6088H59.5376H59.4666H59.3956H59.3248H59.2541H59.1835H59.113H59.0426H58.9724H58.9022H58.8322H58.7622H58.6924H58.6226H58.553H58.4835H58.4141H58.3448H58.2756H58.2065H58.1375H58.0686H57.9998H57.9311H57.8625H57.794H57.7256H57.6572H57.589H57.5209H57.4529H57.385H57.3172H57.2494H57.1818H57.1142H57.0468H56.9794H56.9121H56.8449H56.7779H56.7108H56.6439H56.5771H56.5103H56.4437H56.3771H56.3106H56.2442H56.1779H56.1117H56.0455H55.9794H55.9134H55.8475H55.7817H55.7159H55.6502H55.5846H55.5191H55.4537H55.3883H55.323H55.2578H55.1926H55.1275H55.0625H54.9976H54.9328H54.868H54.8032H54.7386H54.674H54.6095H54.5451H54.4807H54.4164H54.3521H54.2879H54.2238H54.1598H54.0958H54.0318H53.968H53.9042H53.8404H53.7767H53.7131H53.6495H53.586H53.5226H53.4592H53.3958H53.3325H53.2693H53.2061H53.143H53.0799H53.0169H52.9539H52.891H52.8281H52.7653H52.7025H52.6398H52.5771H52.5145H52.4519H52.3894H52.3269H52.2645H52.202H52.1397H52.0774H52.0151H51.9528H51.8907H51.8285H51.7664H51.7043H51.6423H51.5803H51.5183H51.4564H51.3945H51.3326H51.2708H51.209H51.1472H51.0855H51.0238H50.9621H50.9005H50.8389H50.7773H50.7157H50.6542H50.5927H50.5312H50.4698H50.4084H50.347H50.2856H50.2243H50.1629H50.1016H50.0404H49.9791H49.9178H49.8566H49.7954H49.7342H49.6731H49.6119H49.5508H49.4896H49.4285H49.3674H49.3064H49.2453H49.1842H49.1232H49.0622H49.0011H48.9401H48.8791H48.8181H48.7571H48.6962H48.6352H48.5742H48.5133H48.4523H48.3913H48.3304H48.2694H48.2085H48.1475H48.0866H48.0257H47.9647H47.9038H47.8428H47.7819H47.7209H47.6599H47.599H47.538H47.477H47.416H47.3551H47.2941H47.2331H47.172H47.111H47.05H46.9889H46.9279H46.8668H46.8057H46.7446H46.6835H46.6224H46.5612H46.5001H46.4389H46.3777H46.3165H46.2553H46.194H46.1328H46.0715H46.0102H45.9489H45.8875H45.8261H45.7647H45.7033H45.6418H45.5804H45.5189H45.4573H45.3958H45.3342H45.2726H45.2109H45.1493H45.0876H45.0258H44.9641H44.9023H44.8404H44.7786H44.7166H44.6547H44.5927H44.5307H44.4687H44.4066H44.3445H44.2823H44.2201H44.1578H44.0956H44.0332H43.9709H43.9084H43.846H43.7835H43.7209H43.6583H43.5957H43.533H43.4703H43.4075H43.3447H43.2818H43.2189H43.1559H43.0929H43.0298H42.9666H42.9034H42.8402H42.7769H42.7135H42.6501H42.5867H42.5231H42.4596H42.3959H42.3322H42.2685H42.2046H42.1408H42.0768H42.0128H41.9487H41.8846H41.8204H41.7562H41.6918H41.6274H41.563H41.4985H41.4339H41.3692H41.3045H41.2397H41.1748H41.1098H41.0448H40.9797H40.9146H40.8493H40.784H40.7186H40.6532H40.5876H40.522H40.4563H40.3905H40.3247H40.2588H40.1928H40.1267H40.0605H39.9942H39.9279H39.8615H39.795H39.7284H39.6617H39.5949H39.5281H39.4611H39.3941H39.327H39.2598H39.1925H39.1251H39.0576H38.9901H38.9224H38.8547H38.7868H38.7189H38.6508H38.5827H38.5145H38.4461H38.3777H38.3092H38.2406H38.1719H38.103H38.0341H37.9651H37.896H37.8267H37.7574H37.688H37.6184H37.5488H37.479H37.4092H37.3392H37.2691H37.199H37.1287H37.0583H36.9878H36.9171H36.8464H36.7755H36.7046H36.6335H36.5623H36.491H36.4196H36.3481H36.2764H36.2046H36.1328H36.0607H35.9886H35.9164H35.844H35.7715H35.6989H35.6262H35.5533H35.4803H35.4072H35.334H35.2606H35.1872H35.1135H35.0398H34.9659H34.8919H34.8178H34.7436H34.6692H34.5947H34.52H34.4452H34.3703H34.2952H34.2201H34.1447H34.0693H33.9937H33.9179H33.8421H33.7661H33.6899H33.6136H33.5372H33.4606H33.3839H33.3071H33.2301H33.1529H33.0756H32.9982H32.9206H32.8429H32.765H32.687H32.6088H32.5305H32.452H32.3734H32.2946H32.2157H32.1367H32.0574H31.978H31.8985H31.8188H31.739H31.659H31.5788H31.4985H31.418H31.3374H31.2566H31.1757H31.0946H31.0133H30.9318H30.8503H30.7685H30.6866H30.6045H30.5222H30.4398H30.3572H30.2745H30.1915C30.0489 168.5 29.9693 168.466 29.9164 168.433C29.8553 168.394 29.7779 168.322 29.702 168.192C29.5361 167.906 29.4608 167.48 29.5197 167.111C30.9235 158.322 38.6474 151.574 47.9925 151.574C57.3375 151.574 65.0615 158.322 66.4652 167.111C66.5751 167.799 66.4037 168.054 66.3124 168.149C66.1888 168.278 65.8364 168.5 64.9935 168.5Z" fill="rgb(var(--color-background))" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <circle cx="20" cy="141" r="10.5" fill="rgb(var(--color-background))" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <path d="M36.9935 168.5H36.9126H36.8318H36.7512H36.6708H36.5905H36.5104H36.4304H36.3506H36.2709H36.1914H36.1121H36.0329H35.9538H35.8749H35.7962H35.7176H35.6392H35.5609H35.4828H35.4048H35.3269H35.2492H35.1717H35.0943H35.017H34.9399H34.8629H34.7861H34.7094H34.6329H34.5565H34.4802H34.4041H34.3281H34.2523H34.1766H34.101H34.0256H33.9503H33.8751H33.8001H33.7252H33.6504H33.5758H33.5013H33.4269H33.3527H33.2786H33.2046H33.1308H33.0571H32.9835H32.91H32.8367H32.7635H32.6904H32.6175H32.5446H32.4719H32.3993H32.3269H32.2545H32.1823H32.1102H32.0382H31.9664H31.8946H31.823H31.7515H31.6801H31.6088H31.5376H31.4666H31.3956H31.3248H31.2541H31.1835H31.113H31.0426H30.9724H30.9022H30.8322H30.7622H30.6924H30.6226H30.553H30.4835H30.4141H30.3448H30.2756H30.2065H30.1375H30.0686H29.9998H29.9311H29.8625H29.794H29.7256H29.6572H29.589H29.5209H29.4529H29.385H29.3172H29.2494H29.1818H29.1142H29.0468H28.9794H28.9121H28.8449H28.7779H28.7108H28.6439H28.5771H28.5103H28.4437H28.3771H28.3106H28.2442H28.1779H28.1117H28.0455H27.9794H27.9134H27.8475H27.7817H27.7159H27.6502H27.5846H27.5191H27.4537H27.3883H27.323H27.2578H27.1926H27.1275H27.0625H26.9976H26.9328H26.868H26.8032H26.7386H26.674H26.6095H26.5451H26.4807H26.4164H26.3521H26.2879H26.2238H26.1598H26.0958H26.0318H25.968H25.9042H25.8404H25.7767H25.7131H25.6495H25.586H25.5226H25.4592H25.3958H25.3325H25.2693H25.2061H25.143H25.0799H25.0169H24.9539H24.891H24.8281H24.7653H24.7025H24.6398H24.5771H24.5145H24.4519H24.3894H24.3269H24.2645H24.202H24.1397H24.0774H24.0151H23.9528H23.8907H23.8285H23.7664H23.7043H23.6423H23.5803H23.5183H23.4564H23.3945H23.3326H23.2708H23.209H23.1472H23.0855H23.0238H22.9621H22.9005H22.8389H22.7773H22.7157H22.6542H22.5927H22.5312H22.4698H22.4084H22.347H22.2856H22.2243H22.1629H22.1016H22.0404H21.9791H21.9178H21.8566H21.7954H21.7342H21.6731H21.6119H21.5508H21.4896H21.4285H21.3674H21.3064H21.2453H21.1842H21.1232H21.0622H21.0011H20.9401H20.8791H20.8181H20.7571H20.6962H20.6352H20.5742H20.5133H20.4523H20.3913H20.3304H20.2694H20.2085H20.1475H20.0866H20.0257H19.9647H19.9038H19.8428H19.7819H19.7209H19.6599H19.599H19.538H19.477H19.416H19.3551H19.2941H19.2331H19.172H19.111H19.05H18.9889H18.9279H18.8668H18.8057H18.7446H18.6835H18.6224H18.5612H18.5001H18.4389H18.3777H18.3165H18.2553H18.194H18.1328H18.0715H18.0102H17.9489H17.8875H17.8261H17.7647H17.7033H17.6418H17.5804H17.5189H17.4573H17.3958H17.3342H17.2726H17.2109H17.1493H17.0876H17.0258H16.9641H16.9023H16.8404H16.7786H16.7166H16.6547H16.5927H16.5307H16.4687H16.4066H16.3445H16.2823H16.2201H16.1578H16.0956H16.0332H15.9709H15.9084H15.846H15.7835H15.7209H15.6583H15.5957H15.533H15.4703H15.4075H15.3447H15.2818H15.2189H15.1559H15.0929H15.0298H14.9666H14.9034H14.8402H14.7769H14.7135H14.6501H14.5867H14.5231H14.4596H14.3959H14.3322H14.2685H14.2046H14.1408H14.0768H14.0128H13.9487H13.8846H13.8204H13.7562H13.6918H13.6274H13.563H13.4985H13.4339H13.3692H13.3045H13.2397H13.1748H13.1098H13.0448H12.9797H12.9146H12.8493H12.784H12.7186H12.6532H12.5876H12.522H12.4563H12.3905H12.3247H12.2588H12.1928H12.1267H12.0605H11.9942H11.9279H11.8615H11.795H11.7284H11.6617H11.5949H11.5281H11.4611H11.3941H11.327H11.2598H11.1925H11.1251H11.0576H10.9901H10.9224H10.8547H10.7868H10.7189H10.6508H10.5827H10.5145H10.4461H10.3777H10.3092H10.2406H10.1719H10.103H10.0341H9.9651H9.89597H9.82674H9.75741H9.68798H9.61843H9.54879H9.47904H9.40918H9.33921H9.26914H9.19896H9.12867H9.05826H8.98775H8.91713H8.8464H8.77555H8.70459H8.63351H8.56232H8.49102H8.4196H8.34807H8.27641H8.20464H8.13276H8.06075H7.98862H7.91638H7.84401H7.77152H7.69891H7.62617H7.55332H7.48034H7.40723H7.334H7.26064H7.18716H7.11355H7.03981H6.96594H6.89195H6.81782H6.74356H6.66918H6.59466H6.52H6.44522H6.3703H6.29525H6.22006H6.14474H6.06928H5.99368H5.91795H5.84208H5.76607H5.68992H5.61363H5.5372H5.46062H5.38391H5.30705H5.23005H5.15291H5.07562H4.99819H4.92061H4.84288H4.76501H4.68699H4.60882H4.5305H4.45203H4.37342H4.29465H4.21573H4.13665H4.05743H3.97805H3.89851H3.81882H3.73898H3.65898H3.57882H3.49851H3.41804H3.33741H3.25662H3.17566H3.09455H3.01328H2.93185H2.85025H2.76849H2.68657H2.60448H2.52223H2.43981H2.35722H2.27447H2.19155C2.04893 168.5 1.96927 168.466 1.91645 168.433C1.85532 168.394 1.77792 168.322 1.702 168.192C1.53613 167.906 1.46078 167.48 1.51975 167.111C2.92347 158.322 10.6474 151.574 19.9925 151.574C29.3375 151.574 37.0615 158.322 38.4652 167.111C38.5751 167.799 38.4037 168.054 38.3124 168.149C38.1888 168.278 37.8364 168.5 36.9935 168.5Z" fill="rgb(var(--color-background))" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <circle cx="34" cy="154" r="10.5" fill="rgb(var(--color-background))" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
  <path d="M50.9935 181.5H50.9126H50.8318H50.7512H50.6708H50.5905H50.5104H50.4304H50.3506H50.2709H50.1914H50.1121H50.0329H49.9538H49.8749H49.7962H49.7176H49.6392H49.5609H49.4828H49.4048H49.3269H49.2492H49.1717H49.0943H49.017H48.9399H48.8629H48.7861H48.7094H48.6329H48.5565H48.4802H48.4041H48.3281H48.2523H48.1766H48.101H48.0256H47.9503H47.8751H47.8001H47.7252H47.6504H47.5758H47.5013H47.4269H47.3527H47.2786H47.2046H47.1308H47.0571H46.9835H46.91H46.8367H46.7635H46.6904H46.6175H46.5446H46.4719H46.3993H46.3269H46.2545H46.1823H46.1102H46.0382H45.9664H45.8946H45.823H45.7515H45.6801H45.6088H45.5376H45.4666H45.3956H45.3248H45.2541H45.1835H45.113H45.0426H44.9724H44.9022H44.8322H44.7622H44.6924H44.6226H44.553H44.4835H44.4141H44.3448H44.2756H44.2065H44.1375H44.0686H43.9998H43.9311H43.8625H43.794H43.7256H43.6572H43.589H43.5209H43.4529H43.385H43.3172H43.2494H43.1818H43.1142H43.0468H42.9794H42.9121H42.8449H42.7779H42.7108H42.6439H42.5771H42.5103H42.4437H42.3771H42.3106H42.2442H42.1779H42.1117H42.0455H41.9794H41.9134H41.8475H41.7817H41.7159H41.6502H41.5846H41.5191H41.4537H41.3883H41.323H41.2578H41.1926H41.1275H41.0625H40.9976H40.9328H40.868H40.8032H40.7386H40.674H40.6095H40.5451H40.4807H40.4164H40.3521H40.2879H40.2238H40.1598H40.0958H40.0318H39.968H39.9042H39.8404H39.7767H39.7131H39.6495H39.586H39.5226H39.4592H39.3958H39.3325H39.2693H39.2061H39.143H39.0799H39.0169H38.9539H38.891H38.8281H38.7653H38.7025H38.6398H38.5771H38.5145H38.4519H38.3894H38.3269H38.2645H38.202H38.1397H38.0774H38.0151H37.9528H37.8907H37.8285H37.7664H37.7043H37.6423H37.5803H37.5183H37.4564H37.3945H37.3326H37.2708H37.209H37.1472H37.0855H37.0238H36.9621H36.9005H36.8389H36.7773H36.7157H36.6542H36.5927H36.5312H36.4698H36.4084H36.347H36.2856H36.2243H36.1629H36.1016H36.0404H35.9791H35.9178H35.8566H35.7954H35.7342H35.6731H35.6119H35.5508H35.4896H35.4285H35.3674H35.3064H35.2453H35.1842H35.1232H35.0622H35.0011H34.9401H34.8791H34.8181H34.7571H34.6962H34.6352H34.5742H34.5133H34.4523H34.3913H34.3304H34.2694H34.2085H34.1475H34.0866H34.0257H33.9647H33.9038H33.8428H33.7819H33.7209H33.6599H33.599H33.538H33.477H33.416H33.3551H33.2941H33.2331H33.172H33.111H33.05H32.9889H32.9279H32.8668H32.8057H32.7446H32.6835H32.6224H32.5612H32.5001H32.4389H32.3777H32.3165H32.2553H32.194H32.1328H32.0715H32.0102H31.9489H31.8875H31.8261H31.7647H31.7033H31.6418H31.5804H31.5189H31.4573H31.3958H31.3342H31.2726H31.2109H31.1493H31.0876H31.0258H30.9641H30.9023H30.8404H30.7786H30.7166H30.6547H30.5927H30.5307H30.4687H30.4066H30.3445H30.2823H30.2201H30.1578H30.0956H30.0332H29.9709H29.9084H29.846H29.7835H29.7209H29.6583H29.5957H29.533H29.4703H29.4075H29.3447H29.2818H29.2189H29.1559H29.0929H29.0298H28.9666H28.9034H28.8402H28.7769H28.7135H28.6501H28.5867H28.5231H28.4596H28.3959H28.3322H28.2685H28.2046H28.1408H28.0768H28.0128H27.9487H27.8846H27.8204H27.7562H27.6918H27.6274H27.563H27.4985H27.4339H27.3692H27.3045H27.2397H27.1748H27.1098H27.0448H26.9797H26.9146H26.8493H26.784H26.7186H26.6532H26.5876H26.522H26.4563H26.3905H26.3247H26.2588H26.1928H26.1267H26.0605H25.9942H25.9279H25.8615H25.795H25.7284H25.6617H25.5949H25.5281H25.4611H25.3941H25.327H25.2598H25.1925H25.1251H25.0576H24.9901H24.9224H24.8547H24.7868H24.7189H24.6508H24.5827H24.5145H24.4461H24.3777H24.3092H24.2406H24.1719H24.103H24.0341H23.9651H23.896H23.8267H23.7574H23.688H23.6184H23.5488H23.479H23.4092H23.3392H23.2691H23.199H23.1287H23.0583H22.9878H22.9171H22.8464H22.7755H22.7046H22.6335H22.5623H22.491H22.4196H22.3481H22.2764H22.2046H22.1328H22.0607H21.9886H21.9164H21.844H21.7715H21.6989H21.6262H21.5533H21.4803H21.4072H21.334H21.2606H21.1872H21.1135H21.0398H20.9659H20.8919H20.8178H20.7436H20.6692H20.5947H20.52H20.4452H20.3703H20.2952H20.2201H20.1447H20.0693H19.9937H19.9179H19.8421H19.7661H19.6899H19.6136H19.5372H19.4606H19.3839H19.3071H19.2301H19.1529H19.0756H18.9982H18.9206H18.8429H18.765H18.687H18.6088H18.5305H18.452H18.3734H18.2946H18.2157H18.1367H18.0574H17.978H17.8985H17.8188H17.739H17.659H17.5788H17.4985H17.418H17.3374H17.2566H17.1757H17.0946H17.0133H16.9318H16.8503H16.7685H16.6866H16.6045H16.5222H16.4398H16.3572H16.2745H16.1915C16.045 181.5 15.9628 181.465 15.9092 181.432C15.8479 181.394 15.772 181.324 15.6978 181.198C15.5354 180.922 15.4617 180.509 15.5193 180.153C16.9196 171.496 24.6325 164.823 33.9925 164.823C43.3524 164.823 51.0654 171.496 52.4657 180.153C52.574 180.823 52.4052 181.064 52.319 181.152C52.1962 181.279 51.8413 181.5 50.9935 181.5Z" fill="rgb(var(--color-background))" stroke="rgb(var(--color-secondary-700))" stroke-width="3"/>
</svg>
`;class _n{constructor(){this.subscriptionHiddenIcon=mn}}_n.ɵfac=function(n){return new(n||_n)},_n.ɵcmp=d.Xpm({type:_n,selectors:[["app-org-subscription-hidden"]],inputs:{providerName:"providerName"},decls:12,vars:8,consts:[[1,"tw-flex","tw-flex-col","tw-items-center","tw-text-info"],[3,"icon"],[1,"tw-font-bold"]],template:function(n,i){1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n    "),d._UZ(2,"bit-icon",1),d._uU(3,"\n    "),d.TgZ(4,"p",2),d._uU(5),d.ALo(6,"i18n"),d.qZA(),d._uU(7,"\n    "),d.TgZ(8,"p"),d._uU(9),d.ALo(10,"i18n"),d.qZA(),d._uU(11,"\n  "),d.qZA()),2&n&&(d.xp6(2),d.Q6J("icon",i.subscriptionHiddenIcon),d.xp6(3),d.Oqu(d.xi3(6,3,"billingManagedByProvider",i.providerName)),d.xp6(4),d.Oqu(d.lcZ(10,6,"billingContactProviderForAssistance")))},dependencies:[Un.G,f.C],encapsulation:2});class yn{}var An=t(15015),vn=t(4871),xn=t(46246),Sn=t(36338),wn=t(7172),Cn=t(75734),Tn=t(36179),qn=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};function Ln(n,i){if(1&n&&(d.TgZ(0,"form",1),d._uU(1,"\n  "),d.TgZ(2,"h2",2),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n  "),d.TgZ(6,"p"),d._uU(7),d.ALo(8,"i18n"),d.qZA(),d._uU(9,"\n\n  "),d.TgZ(10,"bit-form-control"),d._uU(11,"\n    "),d._UZ(12,"input",3),d._uU(13,"\n    "),d.TgZ(14,"bit-label"),d._uU(15),d.ALo(16,"i18n"),d.qZA(),d._uU(17,"\n  "),d.qZA(),d._uU(18,"\n\n  "),d.TgZ(19,"button",4),d._uU(20),d.ALo(21,"i18n"),d.qZA(),d._uU(22,"\n"),d.qZA()),2&n){const n=d.oxw();d.Q6J("formGroup",n.formGroup)("bitSubmit",n.submit),d.xp6(3),d.Oqu(d.lcZ(4,6,"secretsManagerBeta")),d.xp6(4),d.Oqu(d.lcZ(8,8,"secretsManagerSubscriptionDesc")),d.xp6(8),d.Oqu(d.lcZ(16,10,"secretsManagerEnable")),d.xp6(5),d.hij("\n    ",d.lcZ(21,12,"save"),"\n  ")}}class In{constructor(n,i,t,e,o){this.formBuilder=n,this.organizationApiService=i,this.platformUtilsService=t,this.i18nService=e,this.syncService=o,this.formGroup=this.formBuilder.group({enabled:[!1]}),this.showSecretsManager=!1,this.submit=()=>qn(this,void 0,void 0,(function*(){this.formGroup.markAllAsTouched();const n=new yn;n.enabled=this.formGroup.value.enabled,yield this.organizationApiService.updateEnrollSecretsManager(this.organizationId,n),yield this.syncService.fullSync(!0),this.platformUtilsService.showToast("success",null,this.i18nService.t("subscriptionUpdated"))})),this.showSecretsManager=(0,An.Sp)("secretsManager")}ngOnInit(){this.formGroup.setValue({enabled:this.enabled})}}In.ɵfac=function(n){return new(n||In)(d.Y36(Q.qu),d.Y36(g.M),d.Y36(S.P),d.Y36(O.D),d.Y36(vn._))},In.ɵcmp=d.Xpm({type:In,selectors:[["sm-enroll"]],inputs:{enabled:"enabled",organizationId:"organizationId"},decls:2,vars:1,consts:[[3,"formGroup","bitSubmit",4,"ngIf"],[3,"formGroup","bitSubmit"],[1,"spaced-header"],["type","checkbox","bitCheckbox","","formControlName","enabled"],["bitButton","","bitFormButton","","buttonType","primary","type","submit"]],template:function(n,i){1&n&&(d.YNc(0,Ln,23,14,"form",0),d._uU(1,"\n")),2&n&&d.Q6J("ngIf",i.showSecretsManager)},dependencies:[p.O5,Q._Y,Q.Wl,Q.JJ,Q.JL,Q.sg,Q.u,xn.b,Sn.u,h.r,wn.b,Cn.A,Tn.u,f.C],encapsulation:2});var kn=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};function Jn(n,i){1&n&&(d.TgZ(0,"small"),d._uU(1,"\n      "),d._UZ(2,"i",3),d.ALo(3,"i18n"),d._uU(4,"\n      "),d.TgZ(5,"span",4),d._uU(6),d.ALo(7,"i18n"),d.qZA(),d._uU(8,"\n    "),d.qZA()),2&n&&(d.xp6(2),d.s9C("title",d.lcZ(3,2,"loading")),d.xp6(4),d.Oqu(d.lcZ(7,4,"loading")))}function Mn(n,i){1&n&&(d.ynx(0),d._uU(1,"\n  "),d._UZ(2,"i",5),d.ALo(3,"i18n"),d._uU(4,"\n  "),d.TgZ(5,"span",4),d._uU(6),d.ALo(7,"i18n"),d.qZA(),d._uU(8,"\n"),d.BQk()),2&n&&(d.xp6(2),d.s9C("title",d.lcZ(3,2,"loading")),d.xp6(4),d.Oqu(d.lcZ(7,4,"loading")))}function Bn(n,i){if(1&n&&d._UZ(0,"app-org-subscription-hidden",6),2&n){const n=d.oxw();d.Q6J("providerName",n.userOrg.providerName)}}function On(n,i){1&n&&(d.TgZ(0,"bit-callout",24),d.ALo(1,"i18n"),d._uU(2),d.ALo(3,"i18n"),d.qZA()),2&n&&(d.s9C("title",d.lcZ(1,2,"canceled")),d.xp6(2),d.hij("\n    ",d.lcZ(3,4,"subscriptionCanceled"),""))}function Qn(n,i){if(1&n&&(d.TgZ(0,"bit-callout",24),d.ALo(1,"i18n"),d._uU(2,"\n    "),d.TgZ(3,"p"),d._uU(4),d.ALo(5,"i18n"),d.qZA(),d._uU(6,"\n    "),d.TgZ(7,"button",25),d._uU(8),d.ALo(9,"i18n"),d.qZA(),d._uU(10,"\n  "),d.qZA()),2&n){const n=d.oxw(2);d.s9C("title",d.lcZ(1,4,"pendingCancellation")),d.xp6(4),d.Oqu(d.lcZ(5,6,"subscriptionPendingCanceled")),d.xp6(3),d.Q6J("bitAction",n.reinstate),d.xp6(1),d.hij("\n      ",d.lcZ(9,8,"reinstateSubscription"),"\n    ")}}function Pn(n,i){1&n&&(d.TgZ(0,"span",28),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n&&(d.xp6(1),d.Oqu(d.lcZ(2,1,"pendingCancellation")))}function Nn(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n          "),d.TgZ(2,"dt"),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n          "),d.TgZ(6,"dd"),d._uU(7,"\n            "),d.TgZ(8,"span",26),d._uU(9),d.qZA(),d._uU(10,"\n            "),d.YNc(11,Pn,3,3,"span",27),d._uU(12,"\n          "),d.qZA(),d._uU(13,"\n          "),d.TgZ(14,"dt"),d._uU(15),d.ALo(16,"i18n"),d.qZA(),d._uU(17,"\n          "),d.TgZ(18,"dd"),d._uU(19),d.ALo(20,"date"),d.ALo(21,"currency"),d.qZA(),d._uU(22,"\n        "),d.BQk()),2&n){const n=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,5,"status")),d.xp6(6),d.Oqu(n.isSponsoredSubscription?"sponsored":n.subscription.status||"-"),d.xp6(2),d.Q6J("ngIf",n.subscriptionMarkedForCancel),d.xp6(4),d.Oqu(d.lcZ(16,7,"nextCharge")),d.xp6(4),d.hij("\n            ",n.nextInvoice?d.xi3(20,9,n.nextInvoice.date,"mediumDate")+", "+d.xi3(21,12,n.nextInvoice.amount,"$"):"-","\n          ")}}function zn(n,i){if(1&n&&(d.TgZ(0,"tr"),d._uU(1,"\n            "),d.TgZ(2,"td"),d._uU(3),d.ALo(4,"currency"),d.qZA(),d._uU(5,"\n            "),d.TgZ(6,"td"),d._uU(7),d.ALo(8,"currency"),d.ALo(9,"i18n"),d.qZA(),d._uU(10,"\n          "),d.qZA()),2&n){const n=i.$implicit;d.xp6(3),d.lnq("\n              ",n.name," ",n.quantity>1?"×"+n.quantity:""," @\n              ",d.xi3(4,5,n.amount,"$"),"\n            "),d.xp6(4),d.AsE("",d.xi3(8,8,n.quantity*n.amount,"$")," /",d.lcZ(9,11,n.interval),"")}}function Yn(n,i){if(1&n&&(d.TgZ(0,"div",29),d._uU(1,"\n      "),d.TgZ(2,"strong",30),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n      "),d.TgZ(6,"table",31),d._uU(7,"\n        "),d.TgZ(8,"tbody"),d._uU(9,"\n          "),d.YNc(10,zn,11,13,"tr",32),d._uU(11,"\n        "),d.qZA(),d._uU(12,"\n      "),d.qZA(),d._uU(13,"\n    "),d.qZA()),2&n){const n=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,2,"details")),d.xp6(7),d.Q6J("ngForOf",n.subscription.items)}}function jn(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n      "),d.TgZ(2,"div",33),d._uU(3,"\n        "),d.TgZ(4,"dl"),d._uU(5,"\n          "),d.TgZ(6,"dt"),d._uU(7),d.ALo(8,"i18n"),d.qZA(),d._uU(9,"\n          "),d.TgZ(10,"dd"),d._uU(11),d.ALo(12,"i18n"),d.qZA(),d._uU(13,"\n        "),d.qZA(),d._uU(14,"\n      "),d.qZA(),d._uU(15,"\n    "),d.BQk()),2&n){const n=d.oxw(2);d.xp6(7),d.Oqu(d.lcZ(8,2,"provider")),d.xp6(4),d.Oqu(d.xi3(12,4,"yourProviderIs",n.userOrg.providerName))}}function Dn(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"button",34),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.changePlan())})),d._uU(1),d.ALo(2,"i18n"),d.qZA()}2&n&&(d.xp6(1),d.hij("\n      ",d.lcZ(2,1,"changeBillingPlan"),"\n    "))}function Fn(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"app-change-plan",35),d.NdJ("onChanged",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.closeChangePlan())}))("onCanceled",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.closeChangePlan())})),d.qZA()}if(2&n){const n=d.oxw(2);d.Q6J("organizationId",n.organizationId)}}function Gn(n,i){if(1&n&&d._UZ(0,"sm-enroll",36),2&n){const n=d.oxw(2);d.Q6J("enabled",null==n.sub?null:n.sub.useSecretsManager)("organizationId",n.organizationId)}}function Kn(n,i){if(1&n){const n=d.EpF();d.ynx(0),d._uU(1,"\n    "),d.TgZ(2,"div",37),d._uU(3,"\n      "),d.TgZ(4,"app-adjust-subscription",38),d.NdJ("onAdjusted",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.subscriptionAdjusted())})),d._uU(5,"\n      "),d.qZA(),d._uU(6,"\n    "),d.qZA(),d._uU(7,"\n  "),d.BQk()}if(2&n){const n=d.oxw(2);d.xp6(4),d.Q6J("seatPrice",n.seatPrice)("organizationId",n.organizationId)("interval",n.billingInterval)("currentSeatCount",n.seats)("maxAutoscaleSeats",n.maxAutoscaleSeats)}}function Rn(n,i){if(1&n&&(d.TgZ(0,"button",39),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n){const n=d.oxw(2);d.Q6J("bitAction",n.removeSponsorship),d.xp6(1),d.hij("\n    ",d.lcZ(2,2,"removeSponsorship"),"\n  ")}}function En(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"div",19),d._uU(1,"\n        "),d.TgZ(2,"button",34),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw(3);return d.KtG(i.adjustStorage(!0))})),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n        "),d.TgZ(6,"button",42),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw(3);return d.KtG(i.adjustStorage(!1))})),d._uU(7),d.ALo(8,"i18n"),d.qZA(),d._uU(9,"\n      "),d.qZA()}2&n&&(d.xp6(3),d.hij("\n          ",d.lcZ(4,2,"addStorage"),"\n        "),d.xp6(4),d.hij("\n          ",d.lcZ(8,4,"removeStorage"),"\n        "))}function $n(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"app-adjust-storage",43),d.NdJ("onAdjusted",(function(){d.CHM(n);const i=d.oxw(3);return d.KtG(i.closeStorage(!0))}))("onCanceled",(function(){d.CHM(n);const i=d.oxw(3);return d.KtG(i.closeStorage(!1))})),d.qZA()}if(2&n){const n=d.oxw(3);d.Q6J("storageGbPrice",n.storageGbPrice)("add",n.adjustStorageAdd)("organizationId",n.organizationId)("interval",n.billingInterval)}}function Vn(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n    "),d.TgZ(2,"div",37),d._uU(3,"\n      "),d.YNc(4,En,10,6,"div",40),d._uU(5,"\n      "),d.YNc(6,$n,1,4,"app-adjust-storage",41),d._uU(7,"\n    "),d.qZA(),d._uU(8,"\n  "),d.BQk()),2&n){const n=d.oxw(2);d.xp6(4),d.Q6J("ngIf",!n.showAdjustStorage),d.xp6(2),d.Q6J("ngIf",n.showAdjustStorage)}}function Xn(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"button",44),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.downloadLicense())})),d._uU(1),d.ALo(2,"i18n"),d.qZA()}if(2&n){const n=d.oxw(2);d.Q6J("disabled",n.showDownloadLicense),d.xp6(1),d.hij("\n      ",d.lcZ(2,2,"downloadLicense"),"\n    ")}}function Wn(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"button",42),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.manageBillingSync())})),d._uU(1),d.ALo(2,"i18n"),d.qZA()}if(2&n){const n=d.oxw(2);d.xp6(1),d.hij("\n      ",d.lcZ(2,1,n.hasBillingSyncToken?"manageBillingSync":"setUpBillingSync"),"\n    ")}}function ni(n,i){if(1&n){const n=d.EpF();d.TgZ(0,"div",37),d._uU(1,"\n    "),d.TgZ(2,"app-download-license",45),d.NdJ("onDownloaded",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.closeDownloadLicense())}))("onCanceled",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.closeDownloadLicense())})),d.qZA(),d._uU(3,"\n  "),d.qZA()}if(2&n){const n=d.oxw(2);d.xp6(2),d.Q6J("organizationId",n.organizationId)}}function ii(n,i){if(1&n&&(d.TgZ(0,"button",46),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n){const n=d.oxw(2);d.Q6J("bitAction",n.cancel),d.xp6(1),d.hij("\n      ",d.lcZ(2,2,"cancelSubscription"),"\n    ")}}const ti=function(n){return{width:n}};function ei(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n  "),d.YNc(2,On,4,6,"bit-callout",7),d._uU(3,"\n  "),d.YNc(4,Qn,11,10,"bit-callout",7),d._uU(5,"\n\n  "),d.TgZ(6,"div",8),d._uU(7,"\n    "),d.TgZ(8,"div",9),d._uU(9,"\n      "),d.TgZ(10,"dl"),d._uU(11,"\n        "),d.TgZ(12,"dt"),d._uU(13),d.ALo(14,"i18n"),d.qZA(),d._uU(15,"\n        "),d.TgZ(16,"dd"),d._uU(17),d.qZA(),d._uU(18,"\n        "),d.YNc(19,Nn,23,15,"ng-container",1),d._uU(20,"\n      "),d.qZA(),d._uU(21,"\n    "),d.qZA(),d._uU(22,"\n    "),d.YNc(23,Yn,14,4,"div",10),d._uU(24,"\n    "),d.YNc(25,jn,16,7,"ng-container",1),d._uU(26,"\n  "),d.qZA(),d._uU(27,"\n  "),d.ynx(28),d._uU(29,"\n    "),d.YNc(30,Dn,3,3,"button",11),d._uU(31,"\n    "),d.YNc(32,Fn,1,1,"app-change-plan",12),d._uU(33,"\n  "),d.BQk(),d._uU(34,"\n\n  "),d.YNc(35,Gn,1,2,"sm-enroll",13),d._uU(36,"\n\n  "),d.TgZ(37,"h2",14),d._uU(38),d.ALo(39,"i18n"),d.qZA(),d._uU(40,"\n  "),d.TgZ(41,"p",15),d._uU(42),d.qZA(),d._uU(43,"\n  "),d.YNc(44,Kn,8,5,"ng-container",1),d._uU(45,"\n  "),d.YNc(46,Rn,3,4,"button",16),d._uU(47,"\n  "),d.TgZ(48,"h2",14),d._uU(49),d.ALo(50,"i18n"),d.qZA(),d._uU(51,"\n  "),d.TgZ(52,"p"),d._uU(53),d.ALo(54,"i18n"),d.qZA(),d._uU(55,"\n  "),d.TgZ(56,"div",17),d._uU(57,"\n    "),d.TgZ(58,"div",18),d._uU(59),d.ALo(60,"percent"),d.qZA(),d._uU(61,"\n  "),d.qZA(),d._uU(62,"\n  "),d.YNc(63,Vn,9,2,"ng-container",1),d._uU(64,"\n\n  "),d.TgZ(65,"h2",14),d._uU(66),d.ALo(67,"i18n"),d.qZA(),d._uU(68,"\n  "),d.TgZ(69,"p",15),d._uU(70),d.ALo(71,"i18n"),d.qZA(),d._uU(72,"\n  "),d.TgZ(73,"div",19),d._uU(74,"\n    "),d.YNc(75,Xn,3,4,"button",20),d._uU(76,"\n    "),d.YNc(77,Wn,3,3,"button",21),d._uU(78,"\n  "),d.qZA(),d._uU(79,"\n  "),d.YNc(80,ni,4,1,"div",22),d._uU(81,"\n  "),d.TgZ(82,"h2",14),d._uU(83),d.ALo(84,"i18n"),d.qZA(),d._uU(85,"\n  "),d.TgZ(86,"p",15),d._uU(87),d.ALo(88,"i18n"),d.qZA(),d._uU(89,"\n  "),d.TgZ(90,"div",19),d._uU(91,"\n    "),d.YNc(92,ii,3,4,"button",23),d._uU(93,"\n  "),d.qZA(),d._uU(94,"\n"),d.BQk()),2&n){const n=d.oxw();d.xp6(2),d.Q6J("ngIf",n.subscription&&n.subscription.cancelled),d.xp6(2),d.Q6J("ngIf",n.subscriptionMarkedForCancel),d.xp6(9),d.Oqu(d.lcZ(14,28,"billingPlan")),d.xp6(4),d.Oqu(n.sub.plan.name),d.xp6(2),d.Q6J("ngIf",n.subscription),d.xp6(4),d.Q6J("ngIf",n.subscription),d.xp6(2),d.Q6J("ngIf",null!=(null==n.userOrg?null:n.userOrg.providerId)),d.xp6(5),d.Q6J("ngIf",n.showChangePlanButton),d.xp6(2),d.Q6J("ngIf",n.showChangePlan),d.xp6(3),d.Q6J("ngIf",n.isAdmin),d.xp6(3),d.Oqu(d.lcZ(39,30,"manageSubscription")),d.xp6(4),d.Oqu(n.subscriptionDesc),d.xp6(2),d.Q6J("ngIf",n.subscription&&n.canAdjustSeats&&!n.subscription.cancelled&&!n.subscriptionMarkedForCancel),d.xp6(2),d.Q6J("ngIf",n.isSponsoredSubscription),d.xp6(3),d.Oqu(d.lcZ(50,32,"storage")),d.xp6(4),d.Oqu(d.Dn7(54,34,"subscriptionStorage",n.sub.maxStorageGb||0,n.sub.storageName||"0 MB")),d.xp6(5),d.Q6J("ngStyle",d.VKq(48,ti,n.storageProgressWidth+"%")),d.uIk("aria-valuenow",n.storagePercentage),d.xp6(1),d.hij("\n      ",d.lcZ(60,38,n.storagePercentage/100),"\n    "),d.xp6(4),d.Q6J("ngIf",n.subscription&&!n.subscription.cancelled&&!n.subscriptionMarkedForCancel),d.xp6(3),d.Oqu(d.lcZ(67,40,"selfHostingTitle")),d.xp6(4),d.hij("\n    ",d.lcZ(71,42,"selfHostingEnterpriseOrganizationSectionCopy"),"\n  "),d.xp6(5),d.Q6J("ngIf",n.canDownloadLicense),d.xp6(2),d.Q6J("ngIf",n.canManageBillingSync),d.xp6(3),d.Q6J("ngIf",n.showDownloadLicense),d.xp6(3),d.Oqu(d.lcZ(84,44,"additionalOptions")),d.xp6(4),d.hij("\n    ",d.lcZ(88,46,"additionalOptionsDesc"),"\n  "),d.xp6(5),d.Q6J("ngIf",n.subscription&&!n.subscription.cancelled&&!n.subscriptionMarkedForCancel)}}class oi{constructor(n,i,t,e,o,s,a,r){this.apiService=n,this.platformUtilsService=i,this.i18nService=t,this.logService=e,this.modalService=o,this.organizationService=s,this.organizationApiService=a,this.route=r,this.showChangePlan=!1,this.showDownloadLicense=!1,this.adjustStorageAdd=!0,this.showAdjustStorage=!1,this.firstLoaded=!1,this.destroy$=new u.x,this.cancel=()=>kn(this,void 0,void 0,(function*(){if(this.loading)return;if(yield this.platformUtilsService.showDialog(this.i18nService.t("cancelConfirmation"),this.i18nService.t("cancelSubscription"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning"))try{yield this.organizationApiService.cancel(this.organizationId),this.platformUtilsService.showToast("success",null,this.i18nService.t("canceledSubscription")),this.load()}catch(n){this.logService.error(n)}})),this.reinstate=()=>kn(this,void 0,void 0,(function*(){if(this.loading)return;if(yield this.platformUtilsService.showDialog(this.i18nService.t("reinstateConfirmation"),this.i18nService.t("reinstateSubscription"),this.i18nService.t("yes"),this.i18nService.t("cancel")))try{yield this.organizationApiService.reinstate(this.organizationId),this.platformUtilsService.showToast("success",null,this.i18nService.t("reinstated")),this.load()}catch(n){this.logService.error(n)}})),this.removeSponsorship=()=>kn(this,void 0,void 0,(function*(){if(yield this.platformUtilsService.showDialog(this.i18nService.t("removeSponsorshipConfirmation"),this.i18nService.t("removeSponsorship"),this.i18nService.t("remove"),this.i18nService.t("cancel"),"warning"))try{yield this.apiService.deleteRemoveSponsorship(this.organizationId),this.platformUtilsService.showToast("success",null,this.i18nService.t("removeSponsorshipSuccess")),yield this.load()}catch(n){this.logService.error(n)}}))}ngOnInit(){return kn(this,void 0,void 0,(function*(){this.route.snapshot.queryParamMap.get("upgrade")&&this.changePlan(),this.route.params.pipe((0,l.b)((n=>kn(this,void 0,void 0,(function*(){this.organizationId=n.organizationId,yield this.load(),this.firstLoaded=!0})))),(0,H.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){return kn(this,void 0,void 0,(function*(){if(this.loading)return;this.loading=!0,this.userOrg=this.organizationService.get(this.organizationId),this.userOrg.canManageBilling&&(this.sub=yield this.organizationApiService.getSubscription(this.organizationId));const n=yield this.organizationApiService.getApiKeyInformation(this.organizationId);this.hasBillingSyncToken=n.data.some((n=>n.keyType===q.BillingSync)),this.loading=!1}))}get subscription(){return null!=this.sub?this.sub.subscription:null}get nextInvoice(){return null!=this.sub?this.sub.upcomingInvoice:null}get storagePercentage(){return null!=this.sub&&this.sub.maxStorageGb?+(this.sub.storageGb/this.sub.maxStorageGb*100).toFixed(2):0}get storageProgressWidth(){return this.storagePercentage<5?5:0}get billingInterval(){return!this.sub.plan.isAnnual?"month":"year"}get storageGbPrice(){return this.sub.plan.additionalStoragePricePerGb}get seatPrice(){return this.sub.plan.seatPrice}get seats(){return this.sub.seats}get maxAutoscaleSeats(){return this.sub.maxAutoscaleSeats}get canAdjustSeats(){return this.sub.plan.hasAdditionalSeatsOption}get isAdmin(){return this.userOrg.isAdmin}get isSponsoredSubscription(){var n;return null===(n=this.sub.subscription)||void 0===n?void 0:n.items.some((n=>n.sponsoredSubscriptionItem))}get canDownloadLicense(){return this.sub.planType!==I.k.Free&&null==this.subscription||null!=this.subscription&&!this.subscription.cancelled}get canManageBillingSync(){return this.sub.planType===I.k.EnterpriseAnnually||this.sub.planType===I.k.EnterpriseMonthly||this.sub.planType===I.k.EnterpriseAnnually2019||this.sub.planType===I.k.EnterpriseMonthly2019}get subscriptionDesc(){return this.sub.planType===I.k.Free?this.i18nService.t("subscriptionFreePlan",this.sub.seats.toString()):this.sub.planType===I.k.FamiliesAnnually||this.sub.planType===I.k.FamiliesAnnually2019?this.isSponsoredSubscription?this.i18nService.t("subscriptionSponsoredFamiliesPlan",this.sub.seats.toString()):this.i18nService.t("subscriptionFamiliesPlan",this.sub.seats.toString()):this.sub.maxAutoscaleSeats===this.sub.seats&&null!=this.sub.seats?this.i18nService.t("subscriptionMaxReached",this.sub.seats.toString()):null==this.sub.maxAutoscaleSeats?this.i18nService.t("subscriptionUserSeatsUnlimitedAutoscale"):this.i18nService.t("subscriptionUserSeatsLimitedAutoscale",this.sub.maxAutoscaleSeats.toString())}get subscriptionMarkedForCancel(){return null!=this.subscription&&!this.subscription.cancelled&&this.subscription.cancelAtEndDate}changePlan(){return kn(this,void 0,void 0,(function*(){this.showChangePlan=!this.showChangePlan}))}closeChangePlan(){this.showChangePlan=!1}downloadLicense(){this.showDownloadLicense=!this.showDownloadLicense}manageBillingSync(){return kn(this,void 0,void 0,(function*(){const n={data:{organizationId:this.organizationId,hasBillingToken:this.hasBillingSyncToken}};this.modalService.open(nn,n).onClosed.pipe((0,l.b)((()=>kn(this,void 0,void 0,(function*(){this.load()})))),(0,H.R)(this.destroy$)).subscribe()}))}closeDownloadLicense(){this.showDownloadLicense=!1}subscriptionAdjusted(){this.load()}adjustStorage(n){this.adjustStorageAdd=n,this.showAdjustStorage=!0}closeStorage(n){this.showAdjustStorage=!1,n&&this.load()}get showChangePlanButton(){return null==this.subscription&&this.sub.planType===I.k.Free&&!this.showChangePlan}}var si;oi.ɵfac=function(n){return new(n||oi)(d.Y36(B.s),d.Y36(S.P),d.Y36(O.D),d.Y36(tn.$),d.Y36(L.Z),d.Y36(s.Mn),d.Y36(g.M),d.Y36(o.gz))},oi.ɵcmp=d.Xpm({type:oi,selectors:[["app-org-subscription-cloud"]],decls:15,vars:7,consts:[[1,"page-header"],[4,"ngIf"],[3,"providerName",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[3,"providerName"],["type","warning",3,"title",4,"ngIf"],[1,"row"],[1,"col-4"],["class","col-8",4,"ngIf"],["bitButton","","buttonType","secondary","type","button",3,"click",4,"ngIf"],[3,"organizationId","onChanged","onCanceled",4,"ngIf"],[3,"enabled","organizationId",4,"ngIf"],[1,"spaced-header"],[1,"mb-4"],["bitButton","","buttonType","danger","type","button",3,"bitAction",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",3,"ngStyle"],[1,"d-flex"],["bitButton","","buttonType","secondary","type","button",3,"disabled","click",4,"ngIf"],["bitButton","","buttonType","secondary","type","button","class","ml-1",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],["bitButton","","buttonType","danger","type","button","class","ml-1",3,"bitAction",4,"ngIf"],["type","warning",3,"title"],["bitButton","","buttonType","secondary","type","button",3,"bitAction"],[1,"text-capitalize"],["bitBadge","","badgeType","warning",4,"ngIf"],["bitBadge","","badgeType","warning"],[1,"col-8"],[1,"d-block","mb-1"],[1,"table"],[4,"ngFor","ngForOf"],[1,"col-sm"],["bitButton","","buttonType","secondary","type","button",3,"click"],[3,"organizationId","onChanged","onCanceled"],[3,"enabled","organizationId"],[1,"mt-3"],[3,"seatPrice","organizationId","interval","currentSeatCount","maxAutoscaleSeats","onAdjusted"],["bitButton","","buttonType","danger","type","button",3,"bitAction"],["class","d-flex",4,"ngIf"],[3,"storageGbPrice","add","organizationId","interval","onAdjusted","onCanceled",4,"ngIf"],["bitButton","","buttonType","secondary","type","button",1,"ml-1",3,"click"],[3,"storageGbPrice","add","organizationId","interval","onAdjusted","onCanceled"],["bitButton","","buttonType","secondary","type","button",3,"disabled","click"],[3,"organizationId","onDownloaded","onCanceled"],["bitButton","","buttonType","danger","type","button",1,"ml-1",3,"bitAction"]],template:function(n,i){1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n  "),d.TgZ(2,"h1"),d._uU(3),d.ALo(4,"i18n"),d.YNc(5,Jn,9,6,"small",1),d._uU(6,"\n  "),d.qZA(),d._uU(7,"\n"),d.qZA(),d._uU(8,"\n"),d.YNc(9,Mn,9,6,"ng-container",1),d._uU(10,"\n\n"),d.YNc(11,Bn,1,1,"app-org-subscription-hidden",2),d._uU(12,"\n\n"),d.YNc(13,ei,95,50,"ng-container",1),d._uU(14,"\n")),2&n&&(d.xp6(3),d.hij("\n    ",d.lcZ(4,5,"subscription"),"\n    "),d.xp6(2),d.Q6J("ngIf",i.firstLoaded&&i.loading),d.xp6(4),d.Q6J("ngIf",!i.firstLoaded&&i.loading),d.xp6(2),d.Q6J("ngIf",i.firstLoaded&&!i.userOrg.canManageBilling),d.xp6(2),d.Q6J("ngIf",i.sub))},dependencies:[p.sg,p.O5,p.PC,en.Q,on.l,h.r,sn.O,an.H,ln,pn,fn,_n,In,p.Zx,p.H9,p.uU,f.C],encapsulation:2}),function(n){n[n.CloudBillingSync=1]="CloudBillingSync",n[n.Scim=2]="Scim"}(si||(si={}));var ai=t(58043);class ri extends ai.c{constructor(n){if(super(n),null==n)return;this.billingSyncKey=this.getResponseProperty("BillingSyncKey");const i=this.getResponseProperty("LastLicenseSync");i&&(this.lastLicenseSync=new Date(i))}}class ci{constructor(n){this.billingSyncKey=n}}class ui{constructor(n,i,t,e){this.organizationId=n,this.type=i,this.enabled=t,this.config=e}}var li=t(56965),Hi=t(62374),di=t(85356),gi=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};class pi{constructor(n,i,t,e){this.apiService=n,this.logService=i,this.modalRef=t,this.entityId=e.data.entityId,this.existingConnectionId=e.data.existingConnectionId,this.billingSyncKey=e.data.billingSyncKey,this.setParentConnection=e.data.setParentConnection}submit(){var n;return gi(this,void 0,void 0,(function*(){try{const i=new ui(this.entityId,si.CloudBillingSync,!0,new ci(this.billingSyncKey));null==this.existingConnectionId?this.formPromise=this.apiService.createOrganizationConnection(i,ri):this.formPromise=this.apiService.updateOrganizationConnection(i,ri,this.existingConnectionId);const t=yield this.formPromise;this.existingConnectionId=null==t?void 0:t.id,this.billingSyncKey=null===(n=null==t?void 0:t.config)||void 0===n?void 0:n.billingSyncKey,this.setParentConnection(t),this.modalRef.close()}catch(i){this.logService.error(i)}}))}deleteConnection(){return gi(this,void 0,void 0,(function*(){this.formPromise=this.apiService.deleteOrganizationConnection(this.existingConnectionId),yield this.formPromise,this.setParentConnection(null),this.modalRef.close()}))}}pi.ɵfac=function(n){return new(n||pi)(d.Y36(B.s),d.Y36(tn.$),d.Y36(li.b),d.Y36(L.u))},pi.ɵcmp=d.Xpm({type:pi,selectors:[["app-billing-sync-key"]],decls:77,vars:36,consts:[["role","dialog","aria-modal","true","aria-labelledby","billingSyncTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","billingSyncTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","billingSyncKey"],["id","billingSyncKey","type","input","name","billingSyncKey","required","","appAutofocus","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(n,i){if(1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n  "),d.TgZ(2,"div",1),d._uU(3,"\n    "),d.TgZ(4,"form",2,3),d.NdJ("ngSubmit",(function(){return i.submit()})),d._uU(6,"\n      "),d.TgZ(7,"div",4),d._uU(8,"\n        "),d.TgZ(9,"h1",5),d._uU(10),d.ALo(11,"i18n"),d.qZA(),d._uU(12,"\n        "),d.TgZ(13,"button",6),d.ALo(14,"i18n"),d._uU(15,"\n          "),d.TgZ(16,"span",7),d._uU(17,"×"),d.qZA(),d._uU(18,"\n        "),d.qZA(),d._uU(19,"\n      "),d.qZA(),d._uU(20,"\n      "),d.TgZ(21,"div",8),d._uU(22,"\n        "),d.TgZ(23,"p"),d._uU(24),d.ALo(25,"i18n"),d.qZA(),d._uU(26,"\n        "),d.TgZ(27,"div",9),d._uU(28,"\n          "),d.TgZ(29,"label",10),d._uU(30),d.ALo(31,"i18n"),d.TgZ(32,"small"),d._uU(33,"("),d.qZA(),d.TgZ(34,"small"),d._uU(35),d.ALo(36,"i18n"),d.qZA(),d.TgZ(37,"small"),d._uU(38,")"),d.qZA()(),d._uU(39,"\n          "),d.TgZ(40,"input",11),d.NdJ("ngModelChange",(function(n){return i.billingSyncKey=n})),d.qZA(),d._uU(41,"\n        "),d.qZA(),d._uU(42,"\n      "),d.qZA(),d._uU(43,"\n      "),d.TgZ(44,"div",12),d._uU(45,"\n        "),d.TgZ(46,"button",13),d._uU(47,"\n          "),d._UZ(48,"i",14),d.ALo(49,"i18n"),d._uU(50,"\n          "),d.TgZ(51,"span"),d._uU(52),d.ALo(53,"i18n"),d.qZA(),d._uU(54,"\n        "),d.qZA(),d._uU(55,"\n        "),d.TgZ(56,"button",15),d._uU(57),d.ALo(58,"i18n"),d.qZA(),d._uU(59,"\n        "),d.TgZ(60,"div",16),d._uU(61,"\n          "),d.TgZ(62,"button",17,18),d.NdJ("click",(function(){return i.deleteConnection()})),d.ALo(64,"i18n"),d._uU(65,"\n            "),d._UZ(66,"i",19),d._uU(67,"\n            "),d._UZ(68,"i",20),d.ALo(69,"i18n"),d._uU(70,"\n          "),d.qZA(),d._uU(71,"\n        "),d.qZA(),d._uU(72,"\n      "),d.qZA(),d._uU(73,"\n    "),d.qZA(),d._uU(74,"\n  "),d.qZA(),d._uU(75,"\n"),d.qZA(),d._uU(76,"\n")),2&n){const n=d.MAs(5);d.xp6(4),d.Q6J("appApiAction",i.formPromise),d.xp6(6),d.Oqu(d.lcZ(11,16,"manageBillingSync")),d.xp6(3),d.s9C("appA11yTitle",d.lcZ(14,18,"close")),d.xp6(11),d.Oqu(d.lcZ(25,20,"billingSyncKeyDesc")),d.xp6(6),d.hij("",d.lcZ(31,22,"billingSyncKey")," "),d.xp6(5),d.Oqu(d.lcZ(36,24,"required")),d.xp6(5),d.Q6J("ngModel",i.billingSyncKey),d.xp6(6),d.Q6J("disabled",n.loading),d.xp6(2),d.s9C("title",d.lcZ(49,26,"loading")),d.xp6(4),d.Oqu(d.lcZ(53,28,"save")),d.xp6(5),d.hij("\n          ",d.lcZ(58,30,"cancel"),"\n        "),d.xp6(5),d.s9C("appA11yTitle",d.lcZ(64,32,"delete")),d.Q6J("disabled",n.loading),d.xp6(4),d.Q6J("hidden",n.loading),d.xp6(2),d.s9C("title",d.lcZ(69,34,"loading")),d.Q6J("hidden",!n.loading)}},dependencies:[Q.Fj,Q.JJ,Q.JL,Q.Q7,Q.On,Q.F,P.B,N.b,Hi.U,di.b,f.C],encapsulation:2});var hi=t(11518),bi=t(44358);function fi(n,i){1&n&&d.GkF(0)}function Zi(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n  "),d.TgZ(2,"fieldset"),d._uU(3,"\n    "),d.TgZ(4,"legend",2),d._uU(5,"\n      "),d.Hsn(6),d._uU(7,"\n    "),d.qZA(),d._uU(8,"\n    "),d.YNc(9,fi,1,0,"ng-container",3),d._uU(10,"\n  "),d.qZA(),d._uU(11,"\n"),d.BQk()),2&n){d.oxw();const n=d.MAs(5);d.xp6(9),d.Q6J("ngTemplateOutlet",n)}}function Ui(n,i){1&n&&d.GkF(0)}function mi(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n  "),d.YNc(2,Ui,1,0,"ng-container",3),d._uU(3,"\n"),d.BQk()),2&n){d.oxw();const n=d.MAs(5);d.xp6(2),d.Q6J("ngTemplateOutlet",n)}}function _i(n,i){1&n&&d.Hsn(0,1)}const yi=[[["bit-label"]],"*"];let Ai=0;class vi{constructor(n){this.ngControl=n,this.disabled=!1,this.role="radiogroup",this.id="bit-radio-group-"+Ai++,null!=n&&(n.valueAccessor=this)}get name(){var n,i,t;return null!==(n=this._name)&&void 0!==n?n:null===(t=null===(i=this.ngControl)||void 0===i?void 0:i.name)||void 0===t?void 0:t.toString()}set name(n){this._name=n}writeValue(n){this.selected=n}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}onInputChange(n){this.selected=n,this.onChange(this.selected)}onBlur(){this.onTouched()}}vi.ɵfac=function(n){return new(n||vi)(d.Y36(Q.a5,10))},vi.ɵcmp=d.Xpm({type:vi,selectors:[["bit-radio-group"]],contentQueries:function(n,i,t){if(1&n&&d.Suo(t,Tn.u,5),2&n){let n;d.iGM(n=d.CRH())&&(i.label=n.first)}},hostVars:2,hostBindings:function(n,i){2&n&&d.uIk("role",i.role)("id",i.id)},inputs:{name:"name",id:"id"},ngContentSelectors:["bit-label","*"],decls:7,vars:2,consts:[[4,"ngIf"],["content",""],[1,"tw-mb-1","tw-block","tw-text-sm","tw-font-semibold","tw-text-main"],[4,"ngTemplateOutlet"]],template:function(n,i){1&n&&(d.F$t(yi),d.YNc(0,Zi,12,1,"ng-container",0),d._uU(1,"\n\n"),d.YNc(2,mi,4,1,"ng-container",0),d._uU(3,"\n\n"),d.YNc(4,_i,1,0,"ng-template",null,1,d.W1O),d._uU(6,"\n")),2&n&&(d.Q6J("ngIf",i.label),d.xp6(2),d.Q6J("ngIf",!i.label))},dependencies:[p.O5,p.tP],encapsulation:2});var xi=t(11601);let Si=0;class wi{constructor(n){this.ngControl=n,this.id="bit-radio-input-"+Si++,this.inputClasses=["tw-appearance-none","tw-outline-none","tw-relative","tw-transition","tw-cursor-pointer","tw-inline-block","tw-rounded-full","tw-border","tw-border-solid","tw-border-secondary-500","tw-w-3.5","tw-h-3.5","tw-mr-1.5","tw-bottom-[-1px]","hover:tw-border-2","[&>label:hover]:tw-border-2","before:tw-content-['']","before:tw-transition","before:tw-block","before:tw-absolute","before:tw-rounded-full","before:tw-inset-[2px]","focus-visible:tw-ring-2","focus-visible:tw-ring-offset-2","focus-visible:tw-ring-primary-700","disabled:tw-cursor-auto","disabled:tw-border","disabled:tw-bg-secondary-100","checked:tw-bg-text-contrast","checked:tw-border-primary-500","checked:hover:tw-border","checked:hover:tw-border-primary-700","checked:hover:before:tw-bg-primary-700","[&>label:hover]:checked:tw-bg-primary-700","[&>label:hover]:checked:tw-border-primary-700","checked:before:tw-bg-primary-500","checked:disabled:tw-border-secondary-100","checked:disabled:tw-bg-secondary-100","checked:disabled:before:tw-bg-text-muted"]}get disabled(){var n,i,t;return null!==(t=null!==(n=this._disabled)&&void 0!==n?n:null===(i=this.ngControl)||void 0===i?void 0:i.disabled)&&void 0!==t&&t}set disabled(n){this._disabled=null!=n&&!1!==n}get required(){var n,i,t,e;return null!==(e=null!==(n=this._required)&&void 0!==n?n:null===(t=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===t?void 0:t.hasValidator(Q.kI.requiredTrue))&&void 0!==e&&e}set required(n){this._required=null!=n&&!1!==n}get hasError(){var n,i;return"INVALID"===(null===(n=this.ngControl)||void 0===n?void 0:n.status)&&(null===(i=this.ngControl)||void 0===i?void 0:i.touched)}get error(){const n=Object.keys(this.ngControl.errors)[0];return[n,this.ngControl.errors[n]]}}wi.ɵfac=function(n){return new(n||wi)(d.Y36(Q.a5,10))},wi.ɵcmp=d.Xpm({type:wi,selectors:[["input","type","radio","bitRadio",""]],hostVars:4,hostBindings:function(n,i){2&n&&(d.Ikx("disabled",i.disabled),d.uIk("id",i.id),d.Tol(i.inputClasses))},inputs:{id:"id",disabled:"disabled",required:"required"},features:[d._Bn([{provide:xi.y,useExisting:wi}])],attrs:["type","radio","bitRadio",""],decls:0,vars:0,template:function(n,i){},encapsulation:2});const Ci=[[["bit-label"]],[["bit-hint"]]];let Ti=0;class qi{constructor(n){this.groupComponent=n,this.id="bit-radio-button-"+Ti++,this.disabled=!1}get inputId(){return`${this.id}-input`}get name(){return this.groupComponent.name}get selected(){return this.groupComponent.selected===this.value}get groupDisabled(){return this.groupComponent.disabled}onInputChange(){this.groupComponent.onInputChange(this.value)}onBlur(){this.groupComponent.onBlur()}}qi.ɵfac=function(n){return new(n||qi)(d.Y36(vi))},qi.ɵcmp=d.Xpm({type:qi,selectors:[["bit-radio-button"]],hostVars:1,hostBindings:function(n,i){2&n&&d.uIk("id",i.id)},inputs:{id:"id",value:"value",disabled:"disabled"},ngContentSelectors:["bit-label","bit-hint"],decls:9,vars:5,consts:[["inline",""],["type","radio","bitRadio","",3,"id","name","disabled","value","checked","change","blur"]],template:function(n,i){1&n&&(d.F$t(Ci),d.TgZ(0,"bit-form-control",0),d._uU(1,"\n  "),d.TgZ(2,"input",1),d.NdJ("change",(function(){return i.onInputChange()}))("blur",(function(){return i.onBlur()})),d.qZA(),d._uU(3,"\n  "),d.Hsn(4,0,["ngProjectAs","bit-label",5,["bit-label"]]),d._uU(5,"\n  "),d.Hsn(6,1,["ngProjectAs","bit-hint",5,["bit-hint"]]),d._uU(7,"\n"),d.qZA(),d._uU(8,"\n")),2&n&&(d.xp6(2),d.Q6J("id",i.inputId)("name",i.name)("disabled",i.groupDisabled||i.disabled)("value",i.value)("checked",i.selected))},dependencies:[Cn.A,wi],encapsulation:2});var Li,Ii=t(54721),ki=function(n,i,t,e){return new(t||(t=Promise))((function(o,s){function a(n){try{c(e.next(n))}catch(i){s(i)}}function r(n){try{c(e.throw(n))}catch(i){s(i)}}function c(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,r)}c((e=e.apply(n,i||[])).next())}))};function Ji(n,i){1&n&&(d.TgZ(0,"small"),d._uU(1,"\n      "),d._UZ(2,"i",3),d.ALo(3,"i18n"),d._uU(4,"\n      "),d.TgZ(5,"span",4),d._uU(6),d.ALo(7,"i18n"),d.qZA(),d._uU(8,"\n    "),d.qZA()),2&n&&(d.xp6(2),d.s9C("title",d.lcZ(3,2,"loading")),d.xp6(4),d.Oqu(d.lcZ(7,4,"loading")))}function Mi(n,i){1&n&&(d.ynx(0),d._uU(1,"\n  "),d._UZ(2,"i",5),d.ALo(3,"i18n"),d._uU(4,"\n  "),d.TgZ(5,"span",4),d._uU(6),d.ALo(7,"i18n"),d.qZA(),d._uU(8,"\n"),d.BQk()),2&n&&(d.xp6(2),d.s9C("title",d.lcZ(3,2,"loading")),d.xp6(4),d.Oqu(d.lcZ(7,4,"loading")))}function Bi(n,i){if(1&n&&d._UZ(0,"app-org-subscription-hidden",6),2&n){const n=d.oxw();d.Q6J("providerName",n.userOrg.providerName)}}function Oi(n,i){1&n&&(d.TgZ(0,"span",16),d._uU(1,"\n        "),d._UZ(2,"i",17),d._uU(3),d.ALo(4,"i18n"),d.qZA()),2&n&&(d.xp6(3),d.hij("\n        ",d.lcZ(4,1,"licenseIsExpired"),"\n      "))}function Qi(n,i){if(1&n&&(d.TgZ(0,"dd"),d._uU(1),d.ALo(2,"date"),d.YNc(3,Oi,5,3,"span",15),d._uU(4,"\n    "),d.qZA()),2&n){const n=d.oxw(2);d.xp6(1),d.hij("\n      ",d.xi3(2,2,n.sub.expiration,"mediumDate"),"\n      "),d.xp6(2),d.Q6J("ngIf",n.isExpired)}}function Pi(n,i){1&n&&(d.TgZ(0,"dd"),d._uU(1),d.ALo(2,"i18n"),d.qZA()),2&n&&(d.xp6(1),d.Oqu(d.lcZ(2,1,"neverExpires")))}function Ni(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n      "),d.TgZ(2,"dt"),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n      "),d.TgZ(6,"dd"),d._uU(7),d.ALo(8,"date"),d.ALo(9,"i18n"),d.qZA(),d._uU(10,"\n    "),d.BQk()),2&n){const n=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,2,"lastLicenseSync")),d.xp6(4),d.hij("\n        ",null!=n.lastLicenseSync?d.xi3(8,4,n.lastLicenseSync,"medium"):d.lcZ(9,7,"never"),"\n      ")}}function zi(n,i){if(1&n){const n=d.EpF();d.ynx(0),d._uU(1,"\n        "),d.TgZ(2,"button",18),d.NdJ("click",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.manageBillingSyncSelfHosted())})),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n        "),d.TgZ(6,"button",19),d._uU(7),d.ALo(8,"i18n"),d.qZA(),d._uU(9,"\n      "),d.BQk()}if(2&n){const n=d.oxw(2);d.xp6(3),d.hij("\n          ",d.lcZ(4,4,"manageBillingSync"),"\n        "),d.xp6(3),d.Q6J("bitAction",n.syncLicense)("disabled",!n.billingSyncEnabled),d.xp6(1),d.hij("\n          ",d.lcZ(8,6,"syncLicense"),"\n        ")}}function Yi(n,i){if(1&n){const n=d.EpF();d.ynx(0),d._uU(1,"\n        "),d.TgZ(2,"h3",20),d._uU(3),d.ALo(4,"i18n"),d.qZA(),d._uU(5,"\n        "),d.TgZ(6,"app-update-license",21),d.NdJ("onUpdated",(function(){d.CHM(n);const i=d.oxw(2);return d.KtG(i.licenseUploaded())})),d.qZA(),d._uU(7,"\n      "),d.BQk()}if(2&n){const n=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,3,"uploadLicense")),d.xp6(3),d.Q6J("organizationId",n.organizationId)("showCancel",!1)}}function ji(n,i){if(1&n&&(d.ynx(0),d._uU(1,"\n  "),d.TgZ(2,"dl"),d._uU(3,"\n    "),d.TgZ(4,"dt"),d._uU(5),d.ALo(6,"i18n"),d.qZA(),d._uU(7,"\n    "),d.TgZ(8,"dd"),d._uU(9),d.qZA(),d._uU(10,"\n    "),d.TgZ(11,"dt"),d._uU(12),d.ALo(13,"i18n"),d.qZA(),d._uU(14,"\n    "),d.YNc(15,Qi,5,5,"dd",1),d._uU(16,"\n    "),d.YNc(17,Pi,3,3,"dd",1),d._uU(18,"\n    "),d.YNc(19,Ni,11,9,"ng-container",1),d._uU(20,"\n  "),d.qZA(),d._uU(21,"\n\n  "),d.TgZ(22,"a",7),d._uU(23),d.ALo(24,"i18n"),d.qZA(),d._uU(25,"\n  "),d.TgZ(26,"form",8),d._uU(27,"\n    "),d.TgZ(28,"bit-radio-group",9),d._uU(29,"\n      "),d.TgZ(30,"h2",10),d._uU(31),d.ALo(32,"i18n"),d.qZA(),d._uU(33,"\n      "),d.TgZ(34,"bit-radio-button",11),d._uU(35,"\n        "),d.TgZ(36,"bit-label"),d._uU(37),d.ALo(38,"i18n"),d.TgZ(39,"a",12),d._uU(40,"\n            "),d._UZ(41,"i",13),d._uU(42,"\n            "),d.TgZ(43,"span",4),d._uU(44),d.ALo(45,"i18n"),d.qZA(),d._uU(46,"\n          "),d.qZA(),d._uU(47,"\n        "),d.qZA(),d._uU(48,"\n        "),d.TgZ(49,"bit-hint"),d._uU(50),d.ALo(51,"i18n"),d.qZA(),d._uU(52,"\n      "),d.qZA(),d._uU(53,"\n      "),d.YNc(54,zi,10,8,"ng-container",1),d._uU(55,"\n\n      "),d.TgZ(56,"bit-radio-button",14),d._uU(57,"\n        "),d.TgZ(58,"bit-label"),d._uU(59),d.ALo(60,"i18n"),d.qZA(),d._uU(61,"\n        "),d.TgZ(62,"bit-hint"),d._uU(63),d.ALo(64,"i18n"),d.qZA(),d._uU(65,"\n      "),d.qZA(),d._uU(66,"\n      "),d.YNc(67,Yi,8,5,"ng-container",1),d._uU(68,"\n    "),d.qZA(),d._uU(69,"\n  "),d.qZA(),d._uU(70,"\n"),d.BQk()),2&n){const n=d.oxw();d.xp6(5),d.Oqu(d.lcZ(6,19,"billingPlan")),d.xp6(4),d.Oqu(n.sub.plan.name),d.xp6(3),d.Oqu(d.lcZ(13,21,"expiration")),d.xp6(3),d.Q6J("ngIf",n.sub.expiration),d.xp6(2),d.Q6J("ngIf",!n.sub.expiration),d.xp6(2),d.Q6J("ngIf",n.billingSyncSetUp),d.xp6(4),d.hij("\n    ",d.lcZ(24,23,"launchCloudSubscription"),"\n  "),d.xp6(3),d.Q6J("formGroup",n.form),d.xp6(5),d.hij("\n        ",d.lcZ(32,25,"licenseAndBillingManagement"),"\n      "),d.xp6(3),d.Q6J("value",n.licenseOptions.SYNC)("disabled",n.disableLicenseSyncControl),d.xp6(3),d.hij("",d.lcZ(38,27,"automaticSync"),"\n          "),d.xp6(7),d.Oqu(d.lcZ(45,29,"billingSyncHelp")),d.xp6(6),d.hij("\n          ",d.lcZ(51,31,"billingSyncDesc"),"\n        "),d.xp6(4),d.Q6J("ngIf",n.updateMethod===n.licenseOptions.SYNC),d.xp6(2),d.Q6J("value",n.licenseOptions.UPLOAD),d.xp6(3),d.Oqu(d.lcZ(60,33,"manualUpload")),d.xp6(4),d.hij("\n          ",d.lcZ(64,35,"manualUploadDesc"),"\n        "),d.xp6(4),d.Q6J("ngIf",n.updateMethod===n.licenseOptions.UPLOAD)}}!function(n){n[n.SYNC=0]="SYNC",n[n.UPLOAD=1]="UPLOAD"}(Li||(Li={}));class Di{constructor(n,i,t,e,o,s,a,r){this.modalService=n,this.messagingService=i,this.apiService=t,this.organizationService=e,this.route=o,this.organizationApiService=s,this.platformUtilsService=a,this.i18nService=r,this.licenseOptions=Li,this.form=new Q.cw({updateMethod:new Q.NI(Li.UPLOAD)}),this.disableLicenseSyncControl=!1,this.firstLoaded=!1,this.loading=!1,this.destroy$=new u.x,this.syncLicense=()=>ki(this,void 0,void 0,(function*(){this.form.get("updateMethod").setValue(Li.SYNC),yield this.organizationApiService.selfHostedSyncLicense(this.organizationId),this.load(),yield this.loadOrganizationConnection(),this.messagingService.send("updatedOrgLicense"),this.platformUtilsService.showToast("success",null,this.i18nService.t("licenseSyncSuccess"))}))}set existingBillingSyncConnection(n){this._existingBillingSyncConnection=n,this.form.get("updateMethod").setValue(this.billingSyncEnabled?Li.SYNC:Li.UPLOAD)}get existingBillingSyncConnection(){return this._existingBillingSyncConnection}get billingSyncEnabled(){var n;return null===(n=this.existingBillingSyncConnection)||void 0===n?void 0:n.enabled}ngOnInit(){return ki(this,void 0,void 0,(function*(){this.route.params.pipe((0,l.b)((n=>ki(this,void 0,void 0,(function*(){this.organizationId=n.organizationId,yield this.load(),yield this.loadOrganizationConnection(),this.firstLoaded=!0})))),(0,H.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){return ki(this,void 0,void 0,(function*(){this.loading||(this.loading=!0,this.userOrg=this.organizationService.get(this.organizationId),this.userOrg.canManageBilling&&(this.sub=yield this.organizationApiService.getSubscription(this.organizationId)),this.loading=!1)}))}loadOrganizationConnection(){return ki(this,void 0,void 0,(function*(){if(!this.firstLoaded){const n=yield this.apiService.getCloudCommunicationsEnabled();this.disableLicenseSyncControl=!n}this.disableLicenseSyncControl||(this.existingBillingSyncConnection=yield this.apiService.getOrganizationConnection(this.organizationId,si.CloudBillingSync,ri))}))}licenseUploaded(){this.load(),this.messagingService.send("updatedOrgLicense")}manageBillingSyncSelfHosted(){var n,i,t;const e={data:{entityId:this.organizationId,existingConnectionId:null===(n=this.existingBillingSyncConnection)||void 0===n?void 0:n.id,billingSyncKey:null===(t=null===(i=this.existingBillingSyncConnection)||void 0===i?void 0:i.config)||void 0===t?void 0:t.billingSyncKey,setParentConnection:n=>{this.existingBillingSyncConnection=n}}};this.modalService.open(pi,e)}get billingSyncSetUp(){var n;return null!=(null===(n=this.existingBillingSyncConnection)||void 0===n?void 0:n.id)}get isExpired(){var n;return null!=(null===(n=this.sub)||void 0===n?void 0:n.expiration)&&new Date(this.sub.expiration)<new Date}get updateMethod(){return this.form.get("updateMethod").value}get lastLicenseSync(){var n,i;return null===(i=null===(n=this.existingBillingSyncConnection)||void 0===n?void 0:n.config)||void 0===i?void 0:i.lastLicenseSync}}Di.ɵfac=function(n){return new(n||Di)(d.Y36(L.Z),d.Y36(hi.o),d.Y36(B.s),d.Y36(s.Mn),d.Y36(o.gz),d.Y36(g.M),d.Y36(S.P),d.Y36(O.D))},Di.ɵcmp=d.Xpm({type:Di,selectors:[["app-org-subscription-selfhost"]],decls:15,vars:7,consts:[[1,"page-header"],[4,"ngIf"],[3,"providerName",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[3,"providerName"],["bitButton","","buttonType","secondary","href","https://vault.bitwarden.com","target","_blank","rel","noopener"],[3,"formGroup"],["formControlName","updateMethod"],[1,"mt-5"],["id","automatic-sync",1,"tw-block",3,"value","disabled"],["href","https://bitwarden.com/help/families-for-enterprise-self-hosted/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","manual-upload",1,"tw-mt-6","tw-block",3,"value"],["class","text-danger ml-2",4,"ngIf"],[1,"text-danger","ml-2"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["bitButton","","buttonType","secondary","type","button",3,"click"],["bitButton","","buttonType","primary","type","button",3,"bitAction","disabled"],[1,"tw-font-semibold"],[3,"organizationId","showCancel","onUpdated"]],template:function(n,i){1&n&&(d.TgZ(0,"div",0),d._uU(1,"\n  "),d.TgZ(2,"h1"),d._uU(3),d.ALo(4,"i18n"),d.YNc(5,Ji,9,6,"small",1),d._uU(6,"\n  "),d.qZA(),d._uU(7,"\n"),d.qZA(),d._uU(8,"\n\n"),d.YNc(9,Mi,9,6,"ng-container",1),d._uU(10,"\n\n"),d.YNc(11,Bi,1,1,"app-org-subscription-hidden",2),d._uU(12,"\n\n"),d.YNc(13,ji,71,37,"ng-container",1),d._uU(14,"\n")),2&n&&(d.xp6(3),d.hij("\n    ",d.lcZ(4,5,"subscription"),"\n    "),d.xp6(2),d.Q6J("ngIf",i.firstLoaded&&i.loading),d.xp6(4),d.Q6J("ngIf",!i.firstLoaded&&i.loading),d.xp6(2),d.Q6J("ngIf",i.firstLoaded&&!i.userOrg.canManageBilling),d.xp6(2),d.Q6J("ngIf",i.sub&&i.firstLoaded))},dependencies:[p.O5,Q._Y,Q.JJ,Q.JL,Q.sg,Q.u,en.Q,h.r,Tn.u,bi.M,qi,vi,Ii.$,_n,p.uU,f.C],encapsulation:2});const Fi=[{path:"",component:T,canActivate:[c.G],data:{organizationPermissions:s.pF},children:[{path:"",pathMatch:"full",redirectTo:"subscription"},{path:"subscription",component:a.l.isSelfHost()?Di:oi,data:{titleId:"subscription"}},{path:"payment-method",component:r.Z,canActivate:[c.G],data:{titleId:"paymentMethod",organizationPermissions:n=>n.canManageBilling}},{path:"history",component:A,canActivate:[c.G],data:{titleId:"billingHistory",organizationPermissions:n=>n.canManageBilling}}]}];class Gi{}Gi.ɵfac=function(n){return new(n||Gi)},Gi.ɵmod=d.oAB({type:Gi}),Gi.ɵinj=d.cJS({imports:[o.Bz.forChild(Fi),o.Bz]});class Ki{}Ki.ɵfac=function(n){return new(n||Ki)},Ki.ɵmod=d.oAB({type:Ki}),Ki.ɵinj=d.cJS({imports:[e.m,e.f,Gi]})}}]);
//# sourceMappingURL=197.8914d23ea1267939fea2.js.map